(function(){var t,s=function(t,s){return function(){return t.apply(s,arguments)}},e={}.hasOwnProperty,r=function(t,s){function r(){this.constructor=t}for(var a in s)e.call(s,a)&&(t[a]=s[a]);return r.prototype=s.prototype,t.prototype=new r,t.__super__=s.prototype,t};t=function(t){function e(){this.nextEvaluation=s(this.nextEvaluation,this),this.clearEvaluation=s(this.clearEvaluation,this),this.finishEvaluation=s(this.finishEvaluation,this),this.evaluateAnswer=s(this.evaluateAnswer,this),this.initEvaluation=s(this.initEvaluation,this);var t,r;t=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"pas1",src:"pas1.png"},{id:"pas2",src:"pas2.png"},{id:"pas3",src:"pas3.png"},{id:"pas4",src:"pas4.png"}],r=[{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U8_A3_instructions.mp3",id:"instructions"},{src:"sounds/wrong.mp3",id:"wrong"}],this.game={passports:[{x:260,y:260,values:["Eric Schmidt","Germany","blue","brown","1m 10cm"]},{x:860,y:270,values:["Melanie Murphy","Ireland","green","red","1m 7cm"]},{x:260,y:608,values:["Cassandra Wang","China","dark brown","black","1m 15cm"]},{x:868,y:608,values:["Saul Peterson","Canada","light brown","blonde","1m 14cm"]}],steps:[{pattern:["I have","#wc","eyes. I have straight","#wc","hair. I'm","#wc","tall.","#br","My name's","#wc","I'm from Germany."],targets:["blue","brown","1m 10cm","Eric Schmidt"]},{pattern:["I'm","#wc",". I'm from","#wc",". I have","#wc","eyes.","#br","I have curly","#wc","hair. I'm 1m 7cm tall."],targets:["Melanie Murphy","Ireland","green","red"]},{pattern:["I have","#wc","eyes. I have curly blonde hair.","#br","I'm","#wc",". I'm from","#wc",". I'm","#wc","tall."],targets:["light brown","Saul Peterson","Canada","1m 14cm"]},{pattern:["I'm from","#wc",". I have dark brown eyes. I have long","#wc","hair.","#br","I'm","#wc","tall. My name's","#wc"],targets:["China","black","1m 15cm","Cassandra Wang"]}],positions:[{x:140,y:44},{x:164,y:100},{x:178,y:156},{x:190,y:212},{x:146,y:255}]},e.__super__.constructor.call(this,null,t,r)}return r(e,t),e.prototype.setStage=function(){return e.__super__.setStage.apply(this,arguments),this.intento=0,this.steps=this.shuffle(this.game.steps),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Look at the passports, read and drag the words to complete the text.",80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,16,0)),this.setDropper(1).setPassports().introEvaluation()},e.prototype.setPassports=function(){var t,s,e,r,a,i,n,o,p,h,l;for(s=1,h=this.game.passports,n=0,p=h.length;p>n;n++){for(i=h[n],a=new createjs.Container,a.x=i.x,a.y=i.y,a.name="pass"+s,t=this.createBitmap("p"+s,"pas"+s,0,0),a.addChild(t),this.addToMain(a),e=o=0,l=i.values.length-1;l>=o;e=o+=1)r=new DroppableText("p"+s+"v"+e,i.values[e],i.values[e],this.game.positions[e].x,this.game.positions[e].y,this.stage),this.addToLibrary(r),a.addChild(r);s++}return this},e.prototype.setDropper=function(t){var s,e,r,a,i,n,o,p,h,l,u;for(this.step=t,this.library.dropper&&this.mainContainer.contains(this.library.dropper)?s=this.library.dropper:(s=new createjs.Container,s.x=240,s.y=1e3,s.name="dropper",this.addToMain(s)),s.removeAllChildren(),r=0,a=0,i=0,this.targets=new Array,u=this.steps[t-1].pattern,h=0,l=u.length;l>h;h++)o=u[h],n=60*a+14,console.log(n),"#br"===o?(i=0,a++):"#wc"===o?(p=this.steps[t-1].targets[r],e=new WordContainer("h"+r,""+p,"#FFF","#eb188e",i,n+20),e.text.font="40px Quicksand",e.index=r,s.addChild(e),this.addToLibrary(e),this.targets.push(e),i+=e.width+14,r++):(e=this.createText("",o,"40px Quicksand","#333",i,n),s.addChild(e),i+=e.getMeasuredWidth()+24);return this},e.prototype.introEvaluation=function(){return e.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenLite.from([this.library.pass1,this.library.pass2,this.library.pass3,this.library.pass4],1,{alpha:0,delay:1}),TweenLite.from(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+40,delay:1,onComplete:this.playInstructions,onCompleteParams:[this]})},e.prototype.initEvaluation=function(){var t,s,r,a,i;for(e.__super__.initEvaluation.apply(this,arguments),i=[],t=r=1,a=this.game.passports.length;a>=r;t=r+=1)i.push(function(){var e,r,a;for(a=[],s=e=0,r=this.game.passports[t-1].values.length-1;r>=e;s=e+=1)this.library["p"+t+"v"+s].updateDrops(this.targets),this.library["p"+t+"v"+s].addEventListener("dropped",this.evaluateAnswer),a.push(this.library["p"+t+"v"+s].initDragListener());return a}.call(this));return i},e.prototype.evaluateAnswer=function(t){return this.answer=t.target,this.drop=t.drop,this.answer.index===this.steps[this.step-1].targets[this.drop.index]?(this.answer.visible=!1,this.drop.changeText(this.answer.index),this.finishEvaluation(),0===this.intento&&this.library.score.plusOne(),this.intento=0):(this.warning(),this.intento=1,this.answer.returnToPlace())},e.prototype.finishEvaluation=function(){var t,s,e,r;for(createjs.Sound.play("good"),r=this.targets,s=0,e=r.length;e>s;s++)if(t=r[s],""===t.text.text)return;return setTimeout(this.clearEvaluation,1e3)},e.prototype.clearEvaluation=function(){var t,s,e,r,a,i;for(t=e=1,a=this.game.passports.length;a>=e;t=e+=1)for(s=r=0,i=this.game.passports[t-1].values.length-1;i>=r;s=r+=1)this.library["p"+t+"v"+s].visible=!0,this.library["p"+t+"v"+s].returnToPlace();return TweenLite.to(this.library.dropper,.5,{alpha:0,y:this.library.dropper.y+40,onComplete:this.nextEvaluation})},e.prototype.nextEvaluation=function(){var t,s,e,r,a,i;if(this.index++,this.index<this.steps.length){for(this.setDropper(this.index+1),t=e=1,a=this.game.passports.length;a>=e;t=e+=1)for(s=r=0,i=this.game.passports[t-1].values.length-1;i>=r;s=r+=1)this.library["p"+t+"v"+s].updateDrops(this.targets);return TweenLite.to(this.library.dropper,.5,{alpha:1,y:1e3})}return this.finish()},e.prototype.finish=function(){return TweenLite.to([this.library.pass1,this.library.pass2,this.library.pass3,this.library.pass4],1,{alpha:0}),e.__super__.finish.apply(this,arguments)},window.U8A3=e,e}(Oda)}).call(this);