(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}},i={}.hasOwnProperty,r=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=function(e){function i(){this.nextEvaluation=t(this.nextEvaluation,this),this.clearEvaluation=t(this.clearEvaluation,this),this.finishEvaluation=t(this.finishEvaluation,this),this.evaluateAnswer3=t(this.evaluateAnswer3,this),this.evaluateAnswer2=t(this.evaluateAnswer2,this),this.evaluateAnswer1=t(this.evaluateAnswer1,this),this.initEvaluation=t(this.initEvaluation,this);var e,r;e=[{id:"head",src:"pleca1.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"n1",src:"nube1.png"},{id:"n2",src:"nube2.png"},{id:"n3",src:"nube3.png"},{id:"gg",src:"cuadro_naranja.png"},{id:"p1",src:"ninos_cantando.png"},{id:"p2",src:"ninos_jugando.png"},{id:"p3",src:"nina_jugando.png"},{id:"p4",src:"ninos_leyendo.png"},{id:"p5",src:"nino_flauta.png"}],r=[{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/TU2_U1_A1_Instructions.mp3",id:"instructions"},{src:"sounds/TU2_U1_A1_Im_painting_picture.mp3",id:"picture"},{src:"sounds/TU2_U1_A1_Im_playing_flute.mp3",id:"flute"},{src:"sounds/TU2_U1_A1_Were_playing_outside.mp3",id:"outside"},{src:"sounds/TU2_U1_A1_Were_singing_song.mp3",id:"song"},{src:"sounds/TU2_U1_A1_Were_studying_english.mp3",id:"english"},{src:"sounds/wrong.mp3",id:"wrong"},{src:"sounds/good.mp3",id:"good"}],this.answers=[{w1:1,w2:2,w3:2,sound:"song"},{w1:1,w2:1,w3:4,sound:"outside"},{w1:0,w2:0,w3:0,sound:"picture"},{w1:1,w2:3,w3:1,sound:"english"},{w1:0,w2:1,w3:3,sound:"flute"}],i.__super__.constructor.call(this,null,e,r)}return r(i,e),i.prototype.setStage=function(){return i.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Look and drag the parts of the sentences to the speech bubbles.",80,200),this.insertSprite("characters",["p1","p2","p3","p4","p5"],null,stageSize.w/2,470,"mc"),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,5,0)),this.intento=0,this.setDropper().setNube1().setNube2().setNube3().introEvaluation()},i.prototype.setDropper=function(){var e,t,i,r,n;return t=new createjs.Container,t.x=stageSize.w/2-410,t.y=this.library.characters.y+120,t.name="dropper",e=this.createBitmap("backDropper","gg",0,0),i=new WordContainer("h1","","#fef2e7","#f39234",28,64,180,44),r=new WordContainer("h2","","#fef2e7","#f39234",237,124,244,44),n=new WordContainer("h3","","#fef2e7","#f39234",508,124,274,44),i.mouseEnabled=!0,t.addChild(e,i,r,n),this.addToLibrary(i,r,n),this.addToMain(t),this},i.prototype.setNube1=function(){var e,t,i,r;return t=new createjs.Container,t.x=200,t.y=this.library.dropper.y+240,t.name="nube1",e=this.createBitmap("backNube1","n1",0,0),i=new DraggableText("p1n1","I'm",0,80,20),r=new DraggableText("p2n1","We're",1,60,80),t.addChild(e,i,r),this.addToLibrary(e,i,r),this.addToMain(t),this},i.prototype.setNube2=function(){var e,t,i,r,n,a;return t=new createjs.Container,t.x=500,t.y=this.library.dropper.y+240,t.name="nube2",e=this.createBitmap("backNube2","n2",0,0),i=new DraggableText("p1n2","painting",0,80,60),r=new DraggableText("p2n2","playing",1,280,120),n=new DraggableText("p3n2","singing",2,80,160),a=new DraggableText("p4n2","studying",3,240,240),t.addChild(e,i,r,n,a),this.addToLibrary(e,i,r,n,a),this.addToMain(t),this},i.prototype.setNube3=function(){var e,t,i,r,n,a,s;return t=new createjs.Container,t.x=1080,t.y=this.library.dropper.y+240,t.name="nube3",e=this.createBitmap("backNube3","n3",0,0),i=new DraggableText("p1n3","a picture.",0,220,80),r=new DraggableText("p2n3","English.",1,40,100),n=new DraggableText("p3n3","a song.",2,280,160),a=new DraggableText("p4n3","the flute.",3,60,200),s=new DraggableText("p5n3","outside.",4,200,280),t.addChild(e,i,r,n,a,s),this.addToLibrary(e,i,r,n,a,s),this.addToMain(t),this},i.prototype.introEvaluation=function(){var e,t;for(i.__super__.introEvaluation.apply(this,arguments),e=t=1;2>=t;e=t+=1)this.library["p"+e+"n1"].initDragListener();return this.library.characters.currentFrame=this.index,this.library.characters.scaleX=1,this.library.characters.scaleY=1,this.library.characters.alpha=1,TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenLite.from(this.library.characters,1,{alpha:0,y:this.library.characters.y+50,delay:1}),TweenLite.from(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+20,delay:1.2}),TweenLite.from(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+20,delay:1.4}),TweenLite.from(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+20,delay:1.5}),TweenLite.from(this.library.nube3,1,{alpha:0,y:this.library.nube3.y+20,delay:1.6,onComplete:this.playInstructions,onCompleteParams:[this]})},i.prototype.initEvaluation=function(){var e,t;for(i.__super__.initEvaluation.apply(this,arguments),this.library.h1.blink(),this.blink(this.library.backNube1),e=t=1;2>=t;e=t+=1)this.library["p"+e+"n1"].addEventListener("drop",this.evaluateAnswer1);return!1},i.prototype.evaluateAnswer1=function(e){var t,i,r,n;if(this.answer=e.target,i=this.library.h1.globalToLocal(this.stage.mouseX,this.stage.mouseY),this.library.h1.hitTest(i.x,i.y)){if(console.log(i.x,i.y),this.answer.index===this.answers[this.index].w1){for(this.answer.visible=!1,this.library.h1.changeText(this.answer.text.text),this.library.h1.blink(!1),this.blink(this.library.backNube1,!1),this.library.h2.blink(),this.blink(this.library.backNube2),createjs.Sound.play("good"),t=r=1;4>=r;t=r+=1)this.library["p"+t+"n2"].initDragListener();for(t=n=1;4>=n;t=n+=1)this.library["p"+t+"n2"].addEventListener("drop",this.evaluateAnswer2);return!1}return this.warning(),this.intento=1,this.answer.returnToPlace()}return this.answer.returnToPlace()},i.prototype.evaluateAnswer2=function(e){var t,i,r,n,a;if(this.answer=e.target,i=this.library.h2.globalToLocal(this.stage.mouseX,this.stage.mouseY),this.library.h2.hitTest(i.x,i.y)){if(this.answer.index===this.answers[this.index].w2){for(this.answer.visible=!1,this.library.h2.changeText(this.answer.text.text),this.library.h2.blink(!1),this.blink(this.library.backNube2,!1),this.library.h3.blink(),this.blink(this.library.backNube3),createjs.Sound.play("good"),t=r=1;5>=r;t=r+=1)this.library["p"+t+"n3"].initDragListener();for(a=[],t=n=1;5>=n;t=n+=1)a.push(this.library["p"+t+"n3"].addEventListener("drop",this.evaluateAnswer3));return a}return this.warning(),this.intento=1,this.answer.returnToPlace()}return this.answer.returnToPlace()},i.prototype.evaluateAnswer3=function(e){var t,i,r,n,a;if(this.answer=e.target,i=this.library.h3.globalToLocal(this.stage.mouseX,this.stage.mouseY),this.library.h3.hitTest(i.x,i.y)){if(this.answer.index===this.answers[this.index].w3){for(this.answer.visible=!1,this.library.h3.changeText(this.answer.text.text),this.library.h3.blink(!1),this.blink(this.library.backNube3,!1),setTimeout(this.finishEvaluation,1e3),createjs.Sound.play("good"),t=r=1;4>=r;t=r+=1)this.library["p"+t+"n2"].removeEventListener("drop",this.evaluateAnswer2),this.library["p"+t+"n2"].endDragListener();for(a=[],t=n=1;5>=n;t=n+=1)this.library["p"+t+"n3"].removeEventListener("drop",this.evaluateAnswer3),a.push(this.library["p"+t+"n3"].endDragListener());return a}return this.warning(),this.intento=1,this.answer.returnToPlace()}return this.answer.returnToPlace()},i.prototype.finishEvaluation=function(){var e;return 0===this.intento&&this.library.score.plusOne(),e=createjs.Sound.play(this.answers[this.index].sound),e.addEventListener("complete",this.clearEvaluation),this.intento=0},i.prototype.clearEvaluation=function(){var e,t,i,r,n;for(e=t=1;2>=t;e=t+=1)this.library["p"+e+"n1"].visible=!0,this.library["p"+e+"n1"].returnToPlace();for(e=i=1;4>=i;e=i+=1)this.library["p"+e+"n2"].visible=!0,this.library["p"+e+"n2"].returnToPlace();for(e=r=1;5>=r;e=r+=1)this.library["p"+e+"n3"].visible=!0,this.library["p"+e+"n3"].returnToPlace();for(e=n=1;3>=n;e=n+=1)this.library["h"+e].changeText("");return TweenLite.to(this.library.characters,.5,{scaleX:1.5,scaleY:1.5,alpha:0,ease:Back.easeOut,onComplete:this.nextEvaluation})},i.prototype.nextEvaluation=function(){var e,t,i;if(this.index++,this.index<this.answers.length){for(this.library.characters.currentFrame=this.index,this.library.h1.blink(),this.blink(this.library.backNube1),TweenLite.to(this.library.characters,.5,{scaleX:1,scaleY:1,alpha:1,ease:Back.easeOut}),i=[],e=t=1;2>=t;e=t+=1)i.push(this.library["p"+e+"n1"].addEventListener("drop",this.evaluateAnswer1));return i}return this.finish()},i.prototype.blink=function(e,t){return null==t&&(t=!0),TweenMax.killTweensOf(e),e.alpha=1,t?TweenMax.to(e,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},i.prototype.finish=function(){return TweenLite.to(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+20,delay:.2}),TweenLite.to(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+20,delay:.1}),TweenLite.to(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+20,delay:.1}),TweenLite.to(this.library.nube3,1,{alpha:0,y:this.library.nube3.y+20,delay:.1}),i.__super__.finish.apply(this,arguments)},window.U1A1=i,i}(Oda)}).call(this);