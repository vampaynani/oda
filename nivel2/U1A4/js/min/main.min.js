(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t=function(t){function s(){this.repeat=e(this.repeat,this),this.showPhrase=e(this.showPhrase,this),this.nextEvaluation=e(this.nextEvaluation,this),this.finishEvaluation=e(this.finishEvaluation,this),this.evaluateAnswer=e(this.evaluateAnswer,this),this.initEvaluation=e(this.initEvaluation,this);var t,i;t=[{id:"head",src:"pleca1.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"teacher",src:"teacher.png"},{id:"repeat",src:"repeat_btn.png"},{id:"arrive",src:"arrive_time.png"},{id:"quiet",src:"be_quiet.png"},{id:"bus",src:"bus_late.png"},{id:"eat",src:"eat_class.png"},{id:"aud",src:"run_aud.png"},{id:"run",src:"run_hall.png"},{id:"cafe",src:"trash_cafeteria.png"},{id:"library",src:"talk_library.png"},{id:"movies",src:"watch_movies.png"},{id:"trash",src:"throw_trash.png"},{id:"walk",src:"walk_hall.png"}],i=[{src:"sounds/TU2_U1_A4_instructions.mp3",id:"instructions"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U1_A4_arriveClass.mp3",id:"sarrive"},{src:"sounds/TU2_U1_A4_beQuiet.mp3",id:"squiet"},{src:"sounds/TU2_U1_A4_dontBeLate.mp3",id:"sbus"},{src:"sounds/TU2_U1_A4_dontEat.mp3",id:"seat"},{src:"sounds/TU2_U1_A4_dontRunAuditorium.mp3",id:"saud"},{src:"sounds/TU2_U1_A4_dontRunHall.mp3",id:"srun"},{src:"sounds/TU2_U1_A4_keepCafe.mp3",id:"scafe"},{src:"sounds/TU2_U1_A4_sitQuietly.mp3",id:"smovies"},{src:"sounds/TU2_U1_A4_talkQuietly.mp3",id:"slibrary"},{src:"sounds/TU2_U1_A4_throwAway.mp3",id:"strash"},{src:"sounds/TU2_U1_A4_walkHall.mp3",id:"swalk"},{src:"sounds/wrong.mp3",id:"wrong"}],this.game={answers:[{id:"arrive",a:!1},{id:"quiet",a:!1},{id:"bus",a:!1},{id:"eat",a:!1},{id:"aud",a:!1},{id:"run",a:!1},{id:"cafe",a:!1},{id:"library",a:!1},{id:"movies",a:!1},{id:"trash",a:!1},{id:"walk",a:!1}]},s.__super__.constructor.call(this,null,t,i)}return i(s,t),s.prototype.setStage=function(){var t,e,i,r;for(s.__super__.setStage.apply(this,arguments),this.answers=this.game.answers.slice(0),r=this.answers,e=0,i=r.length;i>e;e++)t=r[e],t.a=!1;return this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Listen and click on the correct picture.",80,200),this.insertBitmap("teacher","teacher",500,268),this.insertBitmap("repeat","repeat",882,420),this.insertSprite("choose1",["arrive","quiet","bus","eat","aud","run","cafe","library","movies","trash","walk"],{arrive:0,quiet:1,bus:2,eat:3,aud:4,run:5,cafe:6,library:7,movies:8,trash:9,walk:10},540,904,"mc"),this.insertSprite("choose2",["arrive","quiet","bus","eat","aud","run","cafe","library","movies","trash","walk"],{arrive:0,quiet:1,bus:2,eat:3,aud:4,run:5,cafe:6,library:7,movies:8,trash:9,walk:10},1182,904,"mc"),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,10,0)),this.introEvaluation()},s.prototype.introEvaluation=function(){return s.__super__.introEvaluation.apply(this,arguments),this.library.choose1.alpha=0,this.library.choose1.scaleX=this.library.choose1.scaleY=.6,this.library.choose2.alpha=0,this.library.choose2.scaleX=this.library.choose2.scaleY=.6,TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenLite.from(this.library.teacher,1,{alpha:0,y:this.library.teacher.y+100,delay:1}),TweenLite.from(this.library.repeat,1,{alpha:0,y:this.library.repeat.y+100,delay:1,onComplete:this.playInstructions,onCompleteParams:[this]})},s.prototype.initEvaluation=function(){return s.__super__.initEvaluation.apply(this,arguments),this.showPhrase(),this.library.choose1.addEventListener("click",this.evaluateAnswer),this.library.choose2.addEventListener("click",this.evaluateAnswer),this.library.repeat.addEventListener("click",this.repeat)},s.prototype.evaluateAnswer=function(t){var e;return this.answer=t.target,this.phrase.id===this.answer.currentAnimation?(e=this.answers.where({id:this.phrase.id}),e[0].a=!0,createjs.Sound.play("good"),this.library.score.plusOne(),this.library.choose1.removeEventListener("click",this.evaluateAnswer),this.library.choose2.removeEventListener("click",this.evaluateAnswer),setTimeout(this.finishEvaluation,1e3)):(TweenMax.to([this.library.choose1,this.library.choose2],1,{alpha:0,scaleX:.6,scaleY:.6,ease:Elastic.easeOut,onComplete:this.finishEvaluation}),this.warning())},s.prototype.finishEvaluation=function(){return TweenMax.to([this.library.choose1,this.library.choose2],1,{alpha:0,scaleX:.6,scaleY:.6,ease:Elastic.easeOut,onComplete:this.nextEvaluation})},s.prototype.nextEvaluation=function(){return this.index++,this.index<this.answers.length-1?this.showPhrase():this.finish()},s.prototype.showPhrase=function(){var t,e,s,i,r=this;return i=Math.random()>.5?1:2,e=1===i?2:1,this.phrase=this.getPhrase(),s=this.answers.filter(function(t){return t.id!==r.phrase.id}),t=Math.floor(Math.random()*s.length),this.library["choose"+i].gotoAndStop(this.phrase.id),this.library["choose"+e].gotoAndStop(s[t].id),this.library.choose1.addEventListener("click",this.evaluateAnswer),this.library.choose2.addEventListener("click",this.evaluateAnswer),createjs.Sound.play("s"+this.phrase.id),TweenMax.to([this.library.choose1,this.library.choose2],1,{alpha:1,scaleX:1,scaleY:1,ease:Elastic.easeOut})},s.prototype.getPhrase=function(){var t,e;return e=this.answers.filter(function(t){return t.a===!1}),t=Math.floor(Math.random()*e.length),e[t]},s.prototype.repeat=function(){return createjs.Sound.stop(),createjs.Sound.play("s"+this.phrase.id)},s.prototype.shuffle=function(t){var e,s,i,r,a,n;for(n=[],e=i=r=t.length;1>=r?1>=i:i>=1;e=1>=r?++i:--i)s=Math.floor(Math.random()*(e+1)),n.push((a=[t[s],t[e]],t[e]=a[0],t[s]=a[1],a));return n},s.prototype.blink=function(t,e){return null==e&&(e=!0),TweenMax.killTweensOf(t),t.alpha=1,e?TweenMax.to(t,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},s.prototype.finish=function(){return TweenLite.to(this.library.teacher,1,{alpha:0,y:this.library.teacher.y+100,delay:.1}),TweenLite.to(this.library.repeat,1,{alpha:0,y:this.library.repeat.y+100,delay:.1}),s.__super__.finish.apply(this,arguments)},window.U1A4=s,s}(Oda)}).call(this);