(function(){var t,s=function(t,s){return function(){return t.apply(s,arguments)}},i={}.hasOwnProperty,e=function(t,s){function e(){this.constructor=t}for(var n in s)i.call(s,n)&&(t[n]=s[n]);return e.prototype=s.prototype,t.prototype=new e,t.__super__=s.prototype,t};t=function(t){function i(){this.nextEvaluation=s(this.nextEvaluation,this),this.finishEvaluation=s(this.finishEvaluation,this),this.evaluateAnswer=s(this.evaluateAnswer,this),this.initEvaluation=s(this.initEvaluation,this),this.filterByID=s(this.filterByID,this);var t,e;t=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"windy",src:"windy_image.png"},{id:"sunny",src:"sunny_image.png"},{id:"snowy",src:"snowing_image.png"},{id:"rainy",src:"raining_image.png"},{id:"cloudy",src:"cloudy_image.png"}],e=[{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U5_A2_instructions.mp3",id:"instructions"},{src:"sounds/TU2_U5_A2_raining.mp3",id:"srainy"},{src:"sounds/TU2_U5_A2_cloudy.mp3",id:"scloudy"},{src:"sounds/TU2_U5_A2_snowing.mp3",id:"ssnowy"},{src:"sounds/TU2_U5_A2_sunny.mp3",id:"ssunny"},{src:"sounds/TU2_U5_A2_windy.mp3",id:"swindy"},{src:"sounds/wrong.mp3",id:"wrong"}],this.game={steps:[{id:"windy",texts:[{p:"I",s:1,c:"my jacket."},{p:"I",s:1,c:"my sweater."}]},{id:"sunny",texts:[{p:"I",s:1,c:"my swimsuit."},{p:"I",s:2,c:"my jacket."}]},{id:"rainy",texts:[{p:"I",s:1,c:"my raincoat."},{p:"I",s:1,c:"my umbrella."}]},{id:"snowy",texts:[{p:"I",s:1,c:"my boots."},{p:"I",s:1,c:"my coat."}]},{id:"cloudy",texts:[{p:"I",s:2,c:"my swimsuit."},{p:"I",s:1,c:"my jeans."}]}]},i.__super__.constructor.call(this,null,t,e)}return e(i,t),i.prototype.filterByID=function(t){return t!==this.selected},i.prototype.setStage=function(){var t;return i.__super__.setStage.apply(this,arguments),this.steps=this.shuffle(this.game.steps),this.stepsid=function(){var s,i,e,n;for(e=this.steps,n=[],s=0,i=e.length;i>s;s++)t=e[s],n.push(t.id);return n}.call(this),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Listen and click on the correct option.",80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,15,0)),this.setStep().introEvaluation()},i.prototype.setStep=function(){var t,s,i,e,n,r=this;return this.selected=this.stepsid[this.index],e=0,n=this.stepsid.filter(this.filterByID),n=this.shuffle(n),s=this.preload.getResult(this.selected),i=this.preload.getResult(n[0]),t=new ChooseBitmap("chooseImg",s,i,1,stageSize.w/2,140),t.scaleX=t.scaleY=.6,t.setDistance(1100,600),t.addEventListener("selection",function(t){return r.tindex=0,t.success===!1?(r.warning(),e=1):(0===e&&(r.library.score.plusOne(),createjs.Sound.play("good")),r.showText())}),this.addToMain(t),TweenLite.from(t,1,{alpha:0,y:this.library.chooseImg.y+100,delay:1}),this},i.prototype.introEvaluation=function(){return i.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5,onComplete:this.playInstructions,onCompleteParams:[this]})},i.prototype.initEvaluation=function(){return i.__super__.initEvaluation.apply(this,arguments),this.library.chooseImg.initListeners(),createjs.Sound.play("s"+this.stepsid[this.index])},i.prototype.showText=function(){var t,s,i,e=this;return i=this.steps[this.index].texts[this.tindex],s=0,t=new ChooseText("chooseTxt",i.p,"want","don't want",i.c,i.s,0,900),t.x=stageSize.w/2-t.width/2,t.addEventListener("selection",function(t){return t.success===!1?(e.warning(),s=1):(0===s&&(e.library.score.plusOne(),createjs.Sound.play("good")),e.evaluateAnswer())}),this.addToMain(t)},i.prototype.evaluateAnswer=function(){return this.tindex++,this.tindex<this.steps[this.index].texts.length?(TweenLite.to(this.library.chooseTxt,.5,{y:this.library.chooseTxt.y-100,alpha:0}),this.showText()):this.finishEvaluation()},i.prototype.finishEvaluation=function(){return TweenLite.to(this.library.chooseTxt,.5,{y:this.library.chooseTxt.y-100,alpha:0}),TweenLite.to(this.library.chooseImg,.5,{alpha:0,y:this.library.chooseImg.y-100,ease:Back.easeOut,onComplete:this.nextEvaluation})},i.prototype.nextEvaluation=function(){return this.index++,createjs.Sound.stop(),this.index<this.steps.length?(this.setStep(),this.library.chooseImg.initListeners(),createjs.Sound.play("s"+this.stepsid[this.index])):this.finish()},i.prototype.finish=function(){return i.__super__.finish.apply(this,arguments)},window.U5A2=i,i}(Oda)}).call(this);