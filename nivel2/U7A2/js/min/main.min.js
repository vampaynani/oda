(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,a=function(t,e){function a(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return a.prototype=e.prototype,t.prototype=new a,t.__super__=e.prototype,t};t=function(t){function i(){this.nextEvaluation=e(this.nextEvaluation,this),this.clearEvaluation=e(this.clearEvaluation,this),this.finishEvaluation=e(this.finishEvaluation,this),this.evaluateAnswer=e(this.evaluateAnswer,this),this.initEvaluation=e(this.initEvaluation,this);var t,a;t=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"aBank",src:"a-bank.png"},{id:"aBusstop",src:"a-bus-stop.png"},{id:"aCandystore",src:"a-candy-store.png"},{id:"aGasstation",src:"a-gas-station.png"},{id:"aGrocerystore",src:"a-grocery-store.png"},{id:"aHospital",src:"a-hospital.png"},{id:"aLibrary",src:"a-library.png"},{id:"aMovietheater",src:"a-movie-theater.png"},{id:"aPetstore",src:"a-pet-store.png"},{id:"aPolicestation",src:"a-police-station.png"},{id:"aPostoffice",src:"a-post-office.png"},{id:"aRestaurant",src:"a-restaurant.png"},{id:"aShoestore",src:"a-shoe-store.png"},{id:"anAnimalhospital",src:"an-animal-hospital.png"},{id:"anInternetcafe",src:"an-Internet-cafe.png"},{id:"n1",src:"tag_preposition.png"},{id:"n2",src:"tag_words.png"}],a=[{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"},{src:"sounds/TU2_U6_A3_Instructions.mp3",id:"instructions"}],this.game={steps:[{img:"aBank",frase:"I need some money",targets:["a","bank"]},{img:"aBusstop",frase:"I need to take a bus.",targets:["a","bus","stop"]},{img:"aCandystore",frase:"I want a box of chocolates.",targets:["a","candy","store"]},{img:"aGasstation",frase:"I need some gas.",targets:["a","gas","station"]},{img:"aGrocerystore",frase:"I need some groceries.",targets:["a","grocery","store"]},{img:"aHospital",frase:"I need a doctor",targets:["a","hospital"]},{img:"aLibrary",frase:"I need a book",targets:["a","library"]},{img:"aMovietheater",frase:"I want to watch a movie.",targets:["a","movie","theater"]},{img:"aPetstore",frase:"I need some dog food.",targets:["a","pet","store"]},{img:"aPolicestation",frase:"I have a problem! I need some help!",targets:["a","police","station"]},{img:"aPostoffice",frase:"I need to send a postcard.",targets:["a","post","office"]},{img:"aShoestore",frase:"I need some sandals.",targets:["a","shoe","store"]},{img:"anInternetcafe",frase:"I need to send an e-mail.",targets:["an","Internet","cafe"]}],opt1:[{i:1,t:"a",x:52,y:30},{i:2,t:"an",x:88,y:60}],opt2:[{i:1,t:"cafe",x:40,y:50},{i:2,t:"stop",x:48,y:140},{i:3,t:"library",x:130,y:90},{i:4,t:"grocery",x:148,y:170},{i:5,t:"police",x:112,y:214},{i:6,t:"candy",x:248,y:52},{i:7,t:"post",x:282,y:120},{i:8,t:"animal",x:304,y:210},{i:9,t:"bus",x:400,y:42},{i:10,t:"theater",x:378,y:132},{i:11,t:"pet",x:506,y:66},{i:12,t:"shoe",x:480,y:200},{i:13,t:"gas",x:606,y:50},{i:14,t:"station",x:546,y:142},{i:15,t:"store",x:654,y:92},{i:16,t:"hospital",x:610,y:208},{i:17,t:"bank",x:756,y:50},{i:18,t:"internet",x:726,y:150},{i:19,t:"movie",x:766,y:222},{i:20,t:"office",x:836,y:96}]},i.__super__.constructor.call(this,null,t,a)}return a(i,t),i.prototype.setStage=function(){var t,e,a;return i.__super__.setStage.apply(this,arguments),this.steps=this.shuffleNoRepeat(this.game.steps,11),this.intento=0,a=function(){var t,i,a,r;for(a=this.steps,r=[],t=0,i=a.length;i>t;t++)e=a[t],r.push(e.img);return r}.call(this),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Read and drag the words to make questions.",80,200),t=this.createSprite("images",a,null,stageSize.w/2,470,"mc"),t.scaleX=t.scaleY=.7,this.addToMain(t),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,10,0)),this.setDropper(1).setNube1().setNube2().introEvaluation()},i.prototype.setDropper=function(t){var e,i,a,r,s,n,o,h;for(this.step=t,this.library.dropper?e=this.library.dropper:(e=new createjs.Container,e.y=this.library.images.y+20,e.name="dropper",this.addToMain(e)),e.removeAllChildren(),i=this.createText("frase",this.steps[t-1].frase,"48px Quicksand","#333",380,220,"center"),this.addToLibrary(i),e.addChild(i),s=this.createText("isThere","Is there","48px Quicksand","#333",0,300),e.addChild(s),r=o=0,h=this.steps[t-1].targets.length-1;h>=o;r=o+=1)a=new WordContainer("h"+r,"","#FFF","#F00",220*r+s.getMeasuredWidth()+20,310,200,44),a.index=r,e.addChild(a),this.addToLibrary(a);return n=this.createText("q","?","48px Quicksand","#333",230*this.steps[t-1].targets.length+s.getMeasuredWidth()-20,300),e.addChild(n),e.x=stageSize.w/2-(n.x+n.getMeasuredWidth())/2,this},i.prototype.setNube1=function(){var t,e,i,a,r,s,n;for(e=new createjs.Container,e.x=300,e.y=this.library.dropper.y+400,e.name="nube1",t=this.createBitmap("backNube1","n1",0,0),e.addChild(t),n=this.game.opt1,r=0,s=n.length;s>r;r++)a=n[r],i=new DroppableText("n1d"+a.i,a.t,a.t,a.x,a.y,this.stage),e.addChild(i),this.addToLibrary(i);return this.addToMain(e),this},i.prototype.setNube2=function(){var t,e,i,a,r,s,n;for(e=new createjs.Container,e.x=500,e.y=this.library.dropper.y+400,e.name="nube2",t=this.createBitmap("backNube2","n2",0,0),e.addChild(t),n=this.game.opt2,r=0,s=n.length;s>r;r++)a=n[r],i=new DroppableText("n2d"+a.i,a.t,a.t,a.x,a.y,this.stage),e.addChild(i),this.addToLibrary(i);return this.addToMain(e),this},i.prototype.introEvaluation=function(){return i.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenLite.from(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+40,delay:.7}),TweenLite.from(this.library.images,1,{alpha:0,y:this.library.images.y+40,delay:.7}),TweenLite.from(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40,delay:.9}),TweenLite.from(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40,delay:1.1,onComplete:this.playInstructions,onCompleteParams:[this]})},i.prototype.initEvaluation=function(){var t,e,a,r,s,n,o,h;for(i.__super__.initEvaluation.apply(this,arguments),n=this.game.opt1,e=0,r=n.length;r>e;e++)t=n[e],this.library["n1d"+t.i].updateDrops(this.library.h0),this.library["n1d"+t.i].addEventListener("dropped",this.evaluateAnswer),this.library["n1d"+t.i].initDragListener();for(o=this.game.opt2,h=[],a=0,s=o.length;s>a;a++)t=o[a],3===this.steps[this.step-1].targets.length?this.library["n2d"+t.i].updateDrops(this.library.h1,this.library.h2):this.library["n2d"+t.i].updateDrops(this.library.h1),this.library["n2d"+t.i].addEventListener("dropped",this.evaluateAnswer),h.push(this.library["n2d"+t.i].initDragListener());return h},i.prototype.evaluateAnswer=function(t){return this.answer=t.target,this.drop=t.drop,this.answer.index===this.steps[this.step-1].targets[this.drop.index]?(this.answer.visible=!1,this.drop.changeText(this.answer.index),createjs.Sound.play("good"),this.finishEvaluation()):(this.warning(),this.intento++,console.log(this.intento),this.answer.returnToPlace(),2===this.intento?(this.intento=0,this.clearEvaluation()):void 0)},i.prototype.finishEvaluation=function(){if(3===this.steps[this.step-1].targets.length){if(""===this.library.h0.text.text||""===this.library.h1.text.text||""===this.library.h2.text.text)return}else if(""===this.library.h0.text.text||""===this.library.h1.text.text)return;return this.library.score.plusOne(),this.intento=0,setTimeout(this.clearEvaluation,1e3)},i.prototype.clearEvaluation=function(){var t,e,i,a,r,s,n;for(s=this.game.opt1,e=0,a=s.length;a>e;e++)t=s[e],this.library["n1d"+t.i].visible=!0,this.library["n1d"+t.i].returnToPlace();for(n=this.game.opt2,i=0,r=n.length;r>i;i++)t=n[i],this.library["n2d"+t.i].visible=!0,this.library["n2d"+t.i].returnToPlace();return TweenLite.to(this.library.dropper,.5,{alpha:0,y:this.library.dropper.y+40}),TweenLite.to(this.library.images,.5,{scaleX:1,scaleY:1,alpha:0,ease:Back.easeOut,onComplete:this.nextEvaluation})},i.prototype.nextEvaluation=function(){var t,e,i,a,r,s,n,o;if(this.index++,this.index<this.steps.length){for(this.library.images.gotoAndStop(this.index),this.setDropper(this.index+1),TweenLite.to(this.library.dropper,.5,{alpha:1,y:this.library.images.y+40}),TweenLite.to(this.library.images,.5,{scaleX:.7,scaleY:.7,alpha:1,ease:Back.easeOut}),s=this.game.opt1,e=0,a=s.length;a>e;e++)t=s[e],this.library["n1d"+t.i].updateDrops(this.library.h0);for(n=this.game.opt2,o=[],i=0,r=n.length;r>i;i++)t=n[i],3===this.steps[this.step-1].targets.length?o.push(this.library["n2d"+t.i].updateDrops(this.library.h1,this.library.h2)):o.push(this.library["n2d"+t.i].updateDrops(this.library.h1));return o}return this.finish()},i.prototype.finish=function(){return TweenLite.to(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.to(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),i.__super__.finish.apply(this,arguments)},window.U6A3=i,i}(Oda)}).call(this);