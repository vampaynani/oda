(function(){var i,t=function(i,t){return function(){return i.apply(t,arguments)}},e={}.hasOwnProperty,s=function(i,t){function s(){this.constructor=i}for(var r in t)e.call(t,r)&&(i[r]=t[r]);return s.prototype=t.prototype,i.prototype=new s,i.__super__=t.prototype,i};i=function(i){function e(){this.playSound=t(this.playSound,this),this.nextEvaluation=t(this.nextEvaluation,this),this.finishEvaluation=t(this.finishEvaluation,this),this.evaluateAnswer=t(this.evaluateAnswer,this),this.evaluateDrop=t(this.evaluateDrop,this),this.initEvaluation=t(this.initEvaluation,this);var i,s;i=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"finish",src:"finish-btn.png"},{id:"repeat",src:"repeat-btn.png"},{id:"clockbox",src:"clock-container.png"},{id:"mc1",src:"meg-clock-1.png"},{id:"mc2",src:"meg-clock-2.png"},{id:"mc3",src:"meg-clock-3.png"},{id:"mc4",src:"meg-clock-4.png"},{id:"mc5",src:"meg-clock-5.png"},{id:"mc6",src:"meg-clock-6.png"},{id:"m1",src:"meg-wakes.png"},{id:"m2",src:"meg-breakfast.png"},{id:"m3",src:"meg-leaves.png"},{id:"m4",src:"meg-dishes.png"},{id:"m5",src:"meg-dinner.png"},{id:"m6",src:"meg-sleep.png"},{id:"jc1",src:"jim-clock-1.png"},{id:"jc2",src:"jim-clock-2.png"},{id:"jc3",src:"jim-clock-3.png"},{id:"jc4",src:"jim-clock-4.png"},{id:"jc5",src:"jim-clock-5.png"},{id:"jc6",src:"jim-clock-6.png"},{id:"j1",src:"jim-shower.png"},{id:"j2",src:"jim-breakfast.png"},{id:"j3",src:"jim-leaves.png"},{id:"j4",src:"jim-bus.png"},{id:"j5",src:"jim-cat.png"},{id:"j6",src:"jim-tv.png"},{id:"imgwrong",src:"wrong.png"},{id:"imgcorrect",src:"correct.png"}],s=[{src:"sounds/TU2_U2_A4_instructions.mp3",id:"instructions"},{src:"sounds/TU2_U2_A4_Meg.mp3",id:"meg"},{src:"sounds/TU2_U2_A4_UncleJim.mp3",id:"jim"},{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"}],this.answers=[{name:"meg",values:[{q:"sh1",a:"mc3"},{q:"sh2",a:"mc6"},{q:"sh3",a:"mc4"},{q:"sh4",a:"mc2"},{q:"sh5",a:"mc5"},{q:"sh6",a:"mc1"}]},{name:"jim",values:[{q:"sh1",a:"jc4"},{q:"sh2",a:"jc5"},{q:"sh3",a:"jc1"},{q:"sh4",a:"jc2"},{q:"sh5",a:"jc6"},{q:"sh6",a:"jc3"}]}],this.clocks=[{x:970,y:26},{x:1054,y:160},{x:970,y:290},{x:1054,y:422},{x:970,y:552},{x:1054,y:686}],this.drops=[{x:24,y:10},{x:440,y:10},{x:24,y:306},{x:440,y:306},{x:24,y:610},{x:440,y:610}],e.__super__.constructor.call(this,null,i,s)}return s(e,i),e.prototype.setStage=function(){return e.__super__.setStage.apply(this,arguments),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Listen and drag the clocks to the correct picture.",80,200),this.insertBitmap("repeat","repeat",1090,1080),this.insertBitmap("finish","finish",1326,1080),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,12,0)),this.setMeg(),this.introEvaluation()},e.prototype.setMeg=function(){var i,t,e,s,r,a,n,o,c,h,l,p;for(c=new createjs.Container,c.x=234,c.y=248,this.current=c.name="meg",t=this.createBitmap("megWakes","m1",30,26),e=this.createBitmap("megBreakfast","m2",446,26),s=this.createBitmap("megLeaves","m3",30,322),r=this.createBitmap("megDishes","m4",446,322),a=this.createBitmap("megDinner","m5",30,626),n=this.createBitmap("megSleep","m6",446,626),c.addChild(t,e,s,r,a,n),i=l=1;6>=l;i=l+=1)h=new createjs.Shape,h.graphics.beginFill("#FFF").setStrokeStyle(2).beginStroke("#333").drawRoundRect(0,0,132,84,10),h.x=this.drops[i-1].x,h.y=this.drops[i-1].y,h.name="sh"+i,this.addToLibrary(h),c.addChild(h);for(i=p=1;6>=p;i=p+=1)o=new Draggable("mc"+i,this.preload.getResult("mc"+i),i,this.clocks[i-1].x,this.clocks[i-1].y),o.addEventListener("drop",this.evaluateDrop),this.observer.subscribe("init_meg_evaluation",o.onInitEvaluation),this.addToLibrary(o),c.addChild(o);return this.addToMain(c)},e.prototype.setJim=function(){var i,t,e,s,r,a,n,o,c,h,l,p;for(c=new createjs.Container,c.x=234,c.y=248,this.current=c.name="jim",t=this.createBitmap("jimShower","j1",30,26),e=this.createBitmap("jimBreakfast","j2",446,26),s=this.createBitmap("jimLeaves","j3",30,322),r=this.createBitmap("jimBus","j4",446,322),a=this.createBitmap("jimCat","j5",30,626),n=this.createBitmap("jimTv","j6",446,626),c.addChild(t,e,s,r,a,n),i=l=1;6>=l;i=l+=1)h=new createjs.Shape,h.graphics.beginFill("#FFF").setStrokeStyle(2).beginStroke("#000").drawRoundRect(0,0,132,84,10),h.x=this.drops[i-1].x,h.y=this.drops[i-1].y,h.name="sh"+i,this.addToLibrary(h),c.addChild(h);for(i=p=1;6>=p;i=p+=1)o=new Draggable("jc"+i,this.preload.getResult("jc"+i),i,this.clocks[i-1].x,this.clocks[i-1].y),o.addEventListener("drop",this.evaluateDrop),this.observer.subscribe("init_jim_evaluation",o.onInitEvaluation),this.addToLibrary(o),c.addChild(o);return this.addToMain(c)},e.prototype.introEvaluation=function(){return e.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenMax.from(this.library.meg,1,{alpha:0,x:this.library.meg.x+100,delay:1,onComplete:this.playInstructions,onCompleteParams:[this]})},e.prototype.initEvaluation=function(){return e.__super__.initEvaluation.apply(this,arguments),this.observer.notify("init_"+this.answers[this.index].name+"_evaluation"),this.library.repeat.addEventListener("click",this.playSound),this.library.finish.addEventListener("click",this.evaluateAnswer),this.sound=this.answers[this.index].name,this.playSound()},e.prototype.evaluateDrop=function(i){var t,e,s,r;for(this.answer=i.target,t=!1,s=1;!(t===!0||s>6);)e=this.library["sh"+s],r=e.globalToLocal(this.stage.mouseX,this.stage.mouseY),e.hitTest(r.x,r.y)?(this.answer.x=e.x,this.answer.y=e.y,this.answer.blink(!1),t=!0):(s++,this.answer.returnToPlace());return this},e.prototype.evaluateAnswer=function(){var i,t,e,s;for(this.library.repeat.removeEventListener("click",this.playSound),this.library.finish.removeEventListener("click",this.evaluateAnswer),t=s=1;6>=s;t=s+=1)i=this.answers[this.index].values[t-1],e=this.createSprite("resultado",["imgwrong","imgcorrect"],null,this.library[i.a].x+75,this.library[i.a].y),this.library[i.q].x===this.library[i.a].x&&this.library[i.q].y===this.library[i.a].y?(this.library.score.plusOne(),e.currentFrame=1):e.currentFrame=0,this.library[this.current].addChild(e);return setTimeout(this.finishEvaluation,1e3)},e.prototype.finishEvaluation=function(){return createjs.Sound.stop(this.sound),TweenLite.to(this.library[this.answers[this.index].name],.5,{alpha:0,x:stageSize.w,ease:Quart.easeOut,onComplete:this.nextEvaluation})},e.prototype.nextEvaluation=function(){return this.index++,this.index<this.answers.length?(this.setJim(),TweenMax.from(this.library.jim,1,{alpha:0,x:this.library.jim.x+100,delay:1,onComplete:this.initEvaluation})):this.finish()},e.prototype.playSound=function(){return createjs.Sound.stop(this.sound),createjs.Sound.play(this.sound)},e.prototype.blink=function(i,t){return null==t&&(t=!0),TweenMax.killTweensOf(i),i.alpha=1,t?TweenMax.to(i,.5,{alpha:.5,repeat:-1,yoyo:!0}):void 0},e.prototype.finish=function(){return TweenLite.to(this.library.repeat,1,{alpha:0,x:this.x+40}),TweenLite.to(this.library.finish,1,{alpha:0,x:this.x+40}),TweenLite.to(this.library.jim,1,{alpha:0,x:this.library.jim.x+100}),e.__super__.finish.apply(this,arguments)},window.U2A4=e,e}(Oda)}).call(this);