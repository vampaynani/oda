(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function r(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};t=function(t){function i(){this.nextEvaluation=e(this.nextEvaluation,this),this.clearEvaluation=e(this.clearEvaluation,this),this.finishEvaluation=e(this.finishEvaluation,this),this.evaluateAnswer=e(this.evaluateAnswer,this),this.initEvaluation=e(this.initEvaluation,this);var t,r;t=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"n1",src:"question.png"},{id:"scene1",src:"scenebrazil.png"},{id:"scene2",src:"scenechina.png"},{id:"scene3",src:"sceneindia.png"},{id:"n2",src:"verb.png"}],r=[{src:"sounds/good.mp3",id:"good"},{src:"sounds/TU2_U8_A2_instructions.mp3",id:"instructions"},{src:"sounds/wrong.mp3",id:"wrong"}],this.game={scenes:[{steps:[{frase:"In Brazil.",pattern:["#wc","do they ","#wc"," Reveillon?"],targets:["Where","celebrate"]},{frase:"On January 1st.",pattern:["#wc","do they","#wc","Reveillon?"],targets:["When","celebrate"]},{frase:"White clothes.",pattern:["#wc","do they","#wc","?"],targets:["What","wear"]},{frase:"They float boats with flowers and candles in the sea.",pattern:["#wc","do they","#wc","?"],targets:["What","do"]}],opt1:[{i:1,t:"When",x:50,y:70},{i:2,t:"What",x:180,y:44},{i:3,t:"Where",x:140,y:140}],opt2:[{i:1,t:"celebrate",x:52,y:40},{i:2,t:"do",x:100,y:144},{i:3,t:"wear",x:170,y:116}]},{steps:[{frase:"Moon cakes and pomelos.",pattern:["#wc","do they","#wc","?"],targets:["What","eat"]},{frase:"In September.",pattern:["#wc","do they","#wc","?"],targets:["When","celebrate"]},{frase:"Family and friends.",pattern:["#wc","do they","#wc","?"],targets:["Who","visit"]},{frase:"Lanterns.",pattern:["#wc","do they","#wc","?"],targets:["What","carry"]}],opt1:[{i:1,t:"When",x:50,y:70},{i:2,t:"What",x:130,y:34},{i:3,t:"Who",x:180,y:90},{i:4,t:"Where",x:140,y:140}],opt2:[{i:1,t:"visit",x:80,y:30},{i:2,t:"eat",x:100,y:144},{i:3,t:"celebrate",x:50,y:81},{i:4,t:"carry",x:170,y:116}]},{steps:[{frase:"Beautiful jewelry.",pattern:["#wc","do the women","#wc","?"],targets:["What","wear"]},{frase:"In India.",pattern:["#wc","do they","#wc"," Diwali?"],targets:["Where","celebrate"]},{frase:"In October or November.",pattern:["#wc","do they","#wc"," Diwali?"],targets:["When","celebrate"]},{frase:"They watch fireworks and light candles for good luck.",pattern:["#wc","do they","#wc","?"],targets:["What","do"]}],opt1:[{i:1,t:"When",x:50,y:70},{i:2,t:"What",x:130,y:34},{i:3,t:"Who",x:180,y:90},{i:4,t:"Where",x:140,y:140}],opt2:[{i:1,t:"wear",x:170,y:116},{i:2,t:"do",x:100,y:144},{i:3,t:"celebrate",x:52,y:40}]}]},i.__super__.constructor.call(this,null,t,r)}return r(i,t),i.prototype.setStage=function(){return i.__super__.setStage.apply(this,arguments),this.escena=1,this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Drag the words to form a question.",80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,24,0)),this.setScene(1).setDropper(1).setNube1().setNube2().introEvaluation()},i.prototype.setScene=function(t){return this.scene=this.game.scenes[t-1],this.intento=0,this.sc=this.createBitmap("scene","scene"+t,stageSize.w/2,300,"tc"),this.addToMain(this.sc),this},i.prototype.setDropper=function(t){var e,i,r,a,s,n,h,o,l,p,c;for(this.step=t,this.library.dropper?i=this.library.dropper:(i=new createjs.Container,i.y=780,i.name="dropper"),i.alpha=1,i.parent||this.addToMain(i),i.removeAllChildren(),n=this.createText("q","Q:","48px Quicksand","#333",240,0),i.addChild(n),a=0,s=n.x+n.getMeasuredWidth()+20,c=this.scene.steps[t-1].pattern,l=0,p=c.length;p>l;l++)h=c[l],"#wc"===h?(o=this.scene.steps[t-1].targets[a],r=new WordContainer("h"+a,""+o,"#FFF","#eb188e",s,0,100,50),r.index=a,i.addChild(r),this.addToLibrary(r),s+=r.width+20,a++):(r=this.createText("",h,"48px Quicksand","#333",s,0),i.addChild(r),s+=r.getMeasuredWidth()+20);return e=this.createText("a","A: "+this.scene.steps[this.step-1].frase,"48px Quicksand","#333",240,80),i.addChild(e),this},i.prototype.setNube1=function(){var t,e,i,r,a,s,n;for(e=new createjs.Container,e.x=420,e.y=960,e.name="nube1",e.removeAllChildren(),t=this.createBitmap("backNube1","n1",0,0),e.addChild(t),n=this.scene.opt1,a=0,s=n.length;s>a;a++)r=n[a],i=new DroppableText("n1d"+r.i,r.t,r.t,r.x,r.y,this.stage),e.addChild(i),this.addToLibrary(i);return this.addToMain(e),this},i.prototype.setNube2=function(){var t,e,i,r,a,s,n;for(e=new createjs.Container,e.x=880,e.y=960,e.name="nube2",e.removeAllChildren(),t=this.createBitmap("backNube2","n2",0,0),e.addChild(t),n=this.scene.opt2,a=0,s=n.length;s>a;a++)r=n[a],i=new DroppableText("n2d"+r.i,r.t,r.t,r.x,r.y,this.stage),e.addChild(i),this.addToLibrary(i);return this.addToMain(e),this},i.prototype.introEvaluation=function(){return i.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenLite.from(this.library.scene,1,{alpha:0,y:this.library.scene.y+40,delay:1}),TweenLite.from(this.library.dropper,1,{alpha:0,y:this.library.dropper.y+40,delay:1}),TweenLite.from(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40,delay:1.5}),TweenLite.from(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40,delay:1.5,onComplete:this.playInstructions,onCompleteParams:[this]})},i.prototype.initEvaluation=function(){var t,e,r,a,s,n,h,o;for(i.__super__.initEvaluation.apply(this,arguments),n=this.scene.opt1,e=0,a=n.length;a>e;e++)t=n[e],this.library["n1d"+t.i].updateDrops(this.library.h0),this.library["n1d"+t.i].addEventListener("dropped",this.evaluateAnswer),this.library["n1d"+t.i].initDragListener();for(h=this.scene.opt2,o=[],r=0,s=h.length;s>r;r++)t=h[r],this.library["n2d"+t.i].updateDrops(this.library.h1),this.library["n2d"+t.i].addEventListener("dropped",this.evaluateAnswer),o.push(this.library["n2d"+t.i].initDragListener());return o},i.prototype.evaluateAnswer=function(t){return this.answer=t.target,this.drop=t.drop,this.answer.index===this.scene.steps[this.step-1].targets[this.drop.index]?(this.answer.visible=!1,this.drop.changeText(this.answer.index),0===this.intento&&this.library.score.plusOne(),this.intento=0,createjs.Sound.play("good"),this.finishEvaluation()):(this.warning(),this.intento=1,this.answer.returnToPlace())},i.prototype.finishEvaluation=function(){return""!==this.library.h0.text.text&&""!==this.library.h1.text.text?setTimeout(this.clearEvaluation,1e3):void 0},i.prototype.clearEvaluation=function(){var t,e,i,r,a,s,n;for(s=this.scene.opt1,e=0,r=s.length;r>e;e++)t=s[e],this.library["n1d"+t.i].visible=!0,this.library["n1d"+t.i].returnToPlace();for(n=this.scene.opt2,i=0,a=n.length;a>i;i++)t=n[i],this.library["n2d"+t.i].visible=!0,this.library["n2d"+t.i].returnToPlace();return TweenLite.to(this.library.dropper,.5,{alpha:0,y:this.library.dropper.y+40,onComplete:this.nextEvaluation})},i.prototype.nextEvaluation=function(){var t,e,i,r,a,s,n,h;if(this.index++,this.index<this.scene.steps.length){for(this.setDropper(this.index+1),TweenLite.to(this.library.dropper,.5,{alpha:1,y:780}),s=this.scene.opt1,e=0,r=s.length;r>e;e++)t=s[e],this.library["n1d"+t.i].updateDrops(this.library.h0);for(n=this.scene.opt2,h=[],i=0,a=n.length;a>i;i++)t=n[i],h.push(this.library["n2d"+t.i].updateDrops(this.library.h1));return h}return 3!==this.escena?(this.escena++,this.index=0,this.mainContainer.removeChild(this.sc),TweenLite.to(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.to(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),this.setScene(this.escena).setDropper(1).setNube1().setNube2().initEvaluation(),TweenLite.from(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.from(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),TweenLite.to(this.library.dropper,.5,{alpha:1,y:780})):this.finish()},i.prototype.finish=function(){return TweenLite.to(this.library.scene,1,{alpha:0,y:this.library.scene.y+40}),TweenLite.to(this.library.nube1,1,{alpha:0,y:this.library.nube1.y+40}),TweenLite.to(this.library.nube2,1,{alpha:0,y:this.library.nube2.y+40}),TweenLite.to(this.library.dropper,.5,{alpha:0,y:780}),i.__super__.finish.apply(this,arguments)},window.U8A2=i,i}(Oda)}).call(this);