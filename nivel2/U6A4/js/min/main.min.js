(function(){var t,i=function(t,i){return function(){return t.apply(i,arguments)}},e={}.hasOwnProperty,s=function(t,i){function s(){this.constructor=t}for(var a in i)e.call(i,a)&&(t[a]=i[a]);return s.prototype=i.prototype,t.prototype=new s,t.__super__=i.prototype,t};t=function(t){function e(){this.nextEvaluation=i(this.nextEvaluation,this),this.finishEvaluation=i(this.finishEvaluation,this),this.evaluateAnswer=i(this.evaluateAnswer,this),this.initEvaluation=i(this.initEvaluation,this);var t,s;t=[{id:"head",src:"pleca1.png"},{id:"inst",src:"inst.png"},{id:"c1",src:"circle1.png"},{id:"c2",src:"circle2.png"},{id:"repeatbtn",src:"repeat-btn.png"},{id:"playagain",src:"play_again.png"},{id:"startgame",src:"start_game.png"},{id:"library",src:"library.png"},{id:"park",src:"park.png"},{id:"playingpark",src:"playing-park.png"},{id:"policestation",src:"police-station.png"},{id:"restaurant",src:"restaurant.png"},{id:"sendingmails",src:"sending-mails.png"},{id:"shoppinggrocery",src:"shopping-grocery.png"},{id:"shoppingmall",src:"shopping-mall.png"},{id:"waitingbus",src:"waiting-bus.png"},{id:"watchingmovie",src:"watching-movie.png"}],s=[{src:"sounds/boing.mp3",id:"boing"},{src:"sounds/good.mp3",id:"good"},{src:"sounds/wrong.mp3",id:"wrong"},{src:"sounds/TU2_U6_A4_Instructions.mp3",id:"instructions"}],this.game={steps:[{txt:"They are waiting at the bus stop",img:"waitingbus"},{txt:"They are watching a movie at the movie theater",img:"watchingmovie"},{txt:"She is shopping at the grocery store",img:"shoppinggrocery"},{txt:"They are reading a book at the park",img:"park"},{txt:"She is checking out books at the library",img:"library"},{txt:"They are asking for help at the police station",img:"policestation"},{txt:"He is eating dinner at a restaurant",img:"restaurant"}]},e.__super__.constructor.call(this,null,t,s)}return s(e,t),e.prototype.setStage=function(){return e.__super__.setStage.apply(this,arguments),this.success=1,this.steps=this.shuffle(this.game.steps),this.insertBitmap("header","head",stageSize.w/2,0,"tc"),this.insertInstructions("instructions","Look at the pictures and unscramble the words to make sentences.",80,200),this.addToMain(new Score("score",this.preload.getResult("c1"),this.preload.getResult("c2"),40,1e3,8,0)),this.setScenario(1).introEvaluation()},e.prototype.setScenario=function(t){var i,e;return this.library.scenario?i=this.library.scenario:(i=new createjs.Container,i.name="scenario"),i.removeAllChildren(),i.alpha=1,e=this.createBitmap(this.steps[t-1].img,this.steps[t-1].img,stageSize.w/2,stageSize.h/2-100,"mc"),e.scaleX=e.scaleY=.7,i.addChild(e),this.addToLibrary(i),this.addToMain(i),this},e.prototype.introEvaluation=function(){return e.__super__.introEvaluation.apply(this,arguments),TweenLite.from(this.library.header,1,{y:-this.library.header.height}),TweenLite.from(this.library.instructions,1,{alpha:0,x:0,delay:.5}),TweenLite.from(this.library.scenario,.5,{alpha:0,y:this.library.scenario.y+40,delay:1,onComplete:this.playInstructions,onCompleteParams:[this]})},e.prototype.initEvaluation=function(){return e.__super__.initEvaluation.apply(this,arguments),this.setQuestion(this.index)},e.prototype.setQuestion=function(){var t,i,e,s,a,r,n,o;for(a=new createjs.Container,i=new createjs.Container,t=this.steps[this.index].txt.split(" "),this.scrambled=this.shuffle(t),e=n=1,o=this.scrambled.length;o>=1?o>=n:n>=o;e=o>=1?++n:--n)" "!==this.scrambled[e-1]&&(s=new DraggableText("t"+e,this.scrambled[e-1],this.scrambled[e-1],180*e,0),s.text.font="40px Quicksand",s.text.textAlign="center",s.createHitArea(160,60),s.addEventListener("drop",this.evaluateAnswer),s.onInitEvaluation(),this.addToLibrary(s),a.addChild(s))," "!==t[e-1]&&(r=new WordContainer("l"+e,"","rgba(238,238,238,0.3)","#F00",200*e,0,180,60),r.index=t[e-1],this.addToLibrary(r),i.addChild(r));return i.name="frase",i.y=840,i.x=stageSize.w/2-200*this.scrambled.length/2-100,this.addToMain(i),a.name="palabras",a.y=740,a.x=stageSize.w/2-180*this.scrambled.length/2,this.addToMain(a)},e.prototype.evaluateAnswer=function(t){var i,e,s,a,r;for(this.answer=t.target,i=!1,e=a=1,r=this.scrambled.length;r>=1?r>=a:a>=r;e=r>=1?++a:--a)this.library["l"+e]&&(s=this.library["l"+e].globalToLocal(this.stage.mouseX,this.stage.mouseY),this.library["l"+e].hitTest(s.x,s.y)&&""===this.library["l"+e].text.text&&(this.answer.visible=!1,this.library["l"+e].changeText(this.answer.index),i=!0));return i?this.finishEvaluation():this.answer.returnToPlace()},e.prototype.finishEvaluation=function(){var t,i,e,s,a,r,n,o;for(t=this.steps[this.index].txt.split(" "),i=e=1,r=this.scrambled.length;r>=1?r>=e:e>=r;i=r>=1?++e:--e)if(this.library["l"+i]&&""===this.library["l"+i].text.text)return;for(i=s=1,n=this.scrambled.length;n>=1?n>=s:s>=n;i=n>=1?++s:--s)this.library["l"+i]&&this.library["l"+i].text.text!==t[i-1]&&(this.success=0);if(1===this.success)createjs.Sound.play("good"),this.library.score.plusOne();else for(createjs.Sound.play("wrong"),this.success=1,i=a=1,o=this.scrambled.length;o>=1?o>=a:a>=o;i=o>=1?++a:--a)this.library["l"+i].text.text=t[i-1];return setTimeout(this.nextEvaluation,2e3)},e.prototype.nextEvaluation=function(){return TweenLite.to(this.library.scenario,.5,{alpha:0}),TweenLite.to(this.library.palabras,1,{alpha:0,y:this.library.palabras.y-40,ease:Back.easeOut}),TweenLite.to(this.library.frase,1,{alpha:0,y:this.library.frase.y-40,ease:Back.easeOut}),this.index++,this.index<this.steps.length?(this.setQuestion(this.index),this.setScenario(this.index+1),TweenLite.from(this.library.scenario,.5,{alpha:1}),TweenLite.to(this.library.palabras,1,{alpha:1,ease:Back.easeOut}),TweenLite.to(this.library.frase,1,{alpha:1,ease:Back.easeOut})):this.finish()},e.prototype.finish=function(){return e.__super__.finish.apply(this,arguments)},window.U6A4=e,e}(Oda)}).call(this);