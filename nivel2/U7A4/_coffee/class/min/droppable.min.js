(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i=[].slice;t=function(){function t(t,i,n,s,o,a,r){null==r&&(r=[]),this.blinkAgain=e(this.blinkAgain,this),this.handleMouseDown=e(this.handleMouseDown,this),this.endDragListener=e(this.endDragListener,this),this.initDragListener=e(this.initDragListener,this),this.onStopEvaluation=e(this.onStopEvaluation,this),this.onInitEvaluation=e(this.onInitEvaluation,this),this.initialize(t,i,n,s,o,a,r)}return t.prototype=new createjs.Container,t.prototype.Container_initialize=t.prototype.initialize,t.prototype.initialize=function(t,e,i,n,s,o,a){var r;return this.Container_initialize(),this.name=t,this.bitmap=new createjs.Bitmap(e),this.index=i,this.x=n,this.y=s,this.width=e.width,this.height=e.height,this.pos={x:n,y:s},this.stage=o,this.drops=a,r=new createjs.Shape,r.graphics.beginFill("rgba(0,0,0,0.5)").drawRect(0,0,e.width,e.height),this.hitArea=r,this.inPlace=!1,this.addChild(this.bitmap)},t.prototype.updateDrops=function(){var t,e,n,s,o,a,r;if(t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[],this.drops=[],this.isArray(t))for(s=0,a=t.length;a>s;s++)n=t[s],this.drops.push(n);else for(this.drops.push(t),o=0,r=e.length;r>o;o++)n=e[o],this.drops.push(n);return this.drops},t.prototype.isArray=function(t){return Array.isArray(t||function(t){return"[object Array]"==={}.toString.call(t)})},t.prototype.onInitEvaluation=function(){return this.addEventListener("mousedown",this.handleMouseDown)},t.prototype.onStopEvaluation=function(){return this.removeEventListener("mousedown",this.handleMouseDown)},t.prototype.initDragListener=function(){return this.addEventListener("mousedown",this.handleMouseDown)},t.prototype.endDragListener=function(){return this.removeEventListener("mousedown",this.handleMouseDown)},t.prototype.handleMouseDown=function(t){var e,i,n,s=this;return TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.alpha=1,i=t.stageX/stageSize.r,n=t.stageY/stageSize.r,e={x:i-this.x,y:n-this.y},this.x=i-e.x,this.y=n-e.y,this.addEventListener("pressmove",function(t){return i=t.stageX/stageSize.r,n=t.stageY/stageSize.r,s.x=i-e.x,s.y=n-e.y,!1}),this.addEventListener("pressup",function(){return s.drops.length>0?s.evaluateDrop(t):s.dispatchEvent("drop"),!1}),!1},t.prototype.evaluateDrop=function(){var t,e,i,n,s,o,a;for(i=null,e=!1,a=this.drops,s=0,o=a.length;o>s;s++)t=a[s],n=t.globalToLocal(this.stage.mouseX,this.stage.mouseY),t.hitTest(n.x,n.y)&&(i=t,e=!0);return e?this.dispatchEvent({type:"dropped",drop:i}):this.returnToPlace(this.alpha,this.scaleX,this.scaleY)},t.prototype.blink=function(t){return null==t&&(t=!0),TweenMax.killTweensOf(this),this.alpha=1,t?TweenMax.to(this,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},t.prototype.blinkAgain=function(){return TweenLite.killTweensOf(this),this.blink(!0)},t.prototype.putInPlace=function(t,e,i,n){return null==e&&(e=1),null==i&&(i=1),null==n&&(n=1),this.inPlace=!0,TweenLite.to(this,1,{ease:Back.easeOut,delay:.1,x:t.x,y:t.y,alpha:e,scaleX:i,scaleY:n})},t.prototype.returnToPlace=function(t,e,i,n){return null==t&&(t=1),null==e&&(e=1),null==i&&(i=1),null==n&&(n=!1),n?TweenLite.to(this,.5,{ease:Back.easeOut,delay:.1,x:this.pos.x,y:this.pos.y,alpha:t,scaleX:e,scaleY:i,onComplete:this.blinkAgain}):TweenLite.to(this,.5,{ease:Back.easeOut,delay:.1,x:this.pos.x,y:this.pos.y,alpha:t,scaleX:e,scaleY:i})},t.prototype.takeMeOut=function(){return TweenLite.to(this,.5,{ease:Linear.easeNone,delay:.1,x:this.pos.x,y:this.pos.y,alpha:0,onComplete:this.killMe})},window.Droppable=t,t}()}).call(this);