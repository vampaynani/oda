// Generated by CoffeeScript 1.6.3
(function() {
  var U2A1,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  U2A1 = (function(_super) {
    __extends(U2A1, _super);

    function U2A1() {
      this.nextEvaluation = __bind(this.nextEvaluation, this);
      this.finishEvaluation = __bind(this.finishEvaluation, this);
      this.evaluateAnswer3 = __bind(this.evaluateAnswer3, this);
      this.evaluateAnswer2 = __bind(this.evaluateAnswer2, this);
      this.evaluateAnswer1 = __bind(this.evaluateAnswer1, this);
      this.initEvaluation = __bind(this.initEvaluation, this);
      var manifest, sounds;
      manifest = [
        {
          id: 'head',
          src: 'pleca1.png'
        }, {
          id: 'c1',
          src: 'circle1.png'
        }, {
          id: 'c2',
          src: 'circle2.png'
        }, {
          id: 'propblueberries',
          src: 'prop_blueberries.png'
        }, {
          id: 'propcheese',
          src: 'prop_cheese.png'
        }, {
          id: 'propcorn',
          src: 'prop_corn.png'
        }, {
          id: 'propeggs',
          src: 'prop_eggs.png'
        }, {
          id: 'propgreenPeppers',
          src: 'prop_greenPeppers.png'
        }, {
          id: 'prophoney',
          src: 'prop_honey.png'
        }, {
          id: 'propmarket',
          src: 'prop_market.png'
        }, {
          id: 'propmeat',
          src: 'prop_meat.png'
        }, {
          id: 'propmilk',
          src: 'prop_milk.png'
        }, {
          id: 'propmushrooms',
          src: 'prop_mushrooms.png'
        }, {
          id: 'proppeaches',
          src: 'prop_peaches.png'
        }, {
          id: 'propPeanutButter',
          src: 'prop_PeanutButter.png'
        }, {
          id: 'proppumpkins',
          src: 'prop_pumpkins.png'
        }, {
          id: 'propraspberries',
          src: 'prop_raspberries.png'
        }, {
          id: 'propstrawberryJelly',
          src: 'prop_strawberryJelly.png'
        }, {
          id: 'propsugar',
          src: 'prop_sugar.png'
        }, {
          id: 'propyogurt',
          src: 'prop_yogurt.png'
        }, {
          id: 'n3',
          src: 'tag_food.png'
        }, {
          id: 'n2',
          src: 'tag_pronoun.png'
        }, {
          id: 'n1',
          src: 'tag_verb.png'
        }
      ];
      sounds = [
        {
          src: 'sounds/boing.mp3',
          id: 'boing'
        }, {
          src: 'sounds/TU3_U2_A1_Instructions.mp3',
          id: 'instructions'
        }, {
          src: 'sounds/wrong.mp3',
          id: 'wrong'
        }
      ];
      this.game = [
        [
          {
            id: 'propstrawberryJelly',
            x: 310,
            y: 106,
            a1: 3,
            a2: 0,
            a3: 8
          }, {
            id: 'propPeanutButter',
            x: 467,
            y: 120,
            a1: 2,
            a2: 1,
            a3: 3
          }, {
            id: 'propcorn',
            x: 223,
            y: 167,
            a1: 3,
            a2: 0,
            a3: 4
          }, {
            id: 'propgreenPeppers',
            x: 294,
            y: 186,
            a1: 0,
            a2: 1,
            a3: 7
          }, {
            id: 'propmushrooms',
            x: 370,
            y: 185,
            a1: 0,
            a2: 1,
            a3: 1
          }, {
            id: 'propblueberries',
            x: 440,
            y: 172,
            a1: 1,
            a2: 0,
            a3: 5
          }, {
            id: 'proppeaches',
            x: 530,
            y: 172,
            a1: 1,
            a2: 0,
            a3: 2
          }, {
            id: 'propsugar',
            x: 322,
            y: 273,
            a1: 2,
            a2: 1,
            a3: 0
          }
        ], [
          {
            id: 'propmilk',
            x: 303,
            y: 105,
            a1: 2,
            a2: 1,
            a3: 3
          }, {
            id: 'prophoney',
            x: 466,
            y: 116,
            a1: 2,
            a2: 1,
            a3: 1
          }, {
            id: 'propcheese',
            x: 223,
            y: 159,
            a1: 3,
            a2: 0,
            a3: 2
          }, {
            id: 'propmeat',
            x: 310,
            y: 160,
            a1: 3,
            a2: 0,
            a3: 0
          }, {
            id: 'propyogurt',
            x: 370,
            y: 181,
            a1: 2,
            a2: 1,
            a3: 8
          }, {
            id: 'propeggs',
            x: 434,
            y: 183,
            a1: 0,
            a2: 1,
            a3: 4
          }, {
            id: 'propraspberries',
            x: 505,
            y: 201,
            a1: 0,
            a2: 1,
            a3: 9
          }, {
            id: 'proppumpkins',
            x: 405,
            y: 270,
            a1: 0,
            a2: 1,
            a3: 5
          }
        ]
      ];
      U2A1.__super__.constructor.call(this, null, manifest, sounds);
    }

    U2A1.prototype.setStage = function() {
      U2A1.__super__.setStage.apply(this, arguments);
      this.insertBitmap('header', 'head', stageSize.w / 2, 0, 'tc');
      this.insertInstructions('instructions', 'Look and click on the words to make a sentence.', 40, 100);
      this.insertBitmap('propmarket', 'propmarket', 400, 235, 'mc');
      this.market = 1;
      this.addToMain(new Score('score', this.preload.getResult('c1'), this.preload.getResult('c2'), 20, 500, 16, 0));
      return this.setFood(this.market).setNube1().setNube2().setNube3().setDropper().introEvaluation();
    };

    U2A1.prototype.setFood = function(food) {
      var a, i, scene, _i, _ref;
      if (this.library.dropper) {
        scene = this.library.scene;
      } else {
        scene = new createjs.Container();
        scene.x = 88;
        scene.y = 66;
        scene.name = 'scene';
        this.addToMain(scene);
      }
      scene.removeAllChildren();
      this.foodcollection = this.game[food - 1];
      for (i = _i = 1, _ref = this.foodcollection.length; 1 <= _ref ? _i <= _ref : _i >= _ref; i = 1 <= _ref ? ++_i : --_i) {
        a = this.createBitmap(this.foodcollection[i - 1].id, this.foodcollection[i - 1].id, this.foodcollection[i - 1].x, this.foodcollection[i - 1].y, 'mc');
        scene.addChild(a);
        this.addToLibrary(a);
      }
      this.addToMain(scene);
      return this;
    };

    U2A1.prototype.setNube1 = function() {
      var back, container, w11, w12, w13, w14;
      container = new createjs.Container();
      container.x = 124;
      container.y = 412;
      container.name = 'nube1';
      back = this.createBitmap('backNube1', 'n1', 0, 0);
      w11 = new ClickableText('w11', 'are', 0, 25, 20);
      w12 = new ClickableText('w12', "aren't", 1, 69, 20);
      w13 = new ClickableText('w13', 'is', 2, 44, 47);
      w14 = new ClickableText('w14', "isn't", 3, 79, 62);
      container.addChild(back, w11, w12, w13, w14);
      this.addToLibrary(back, w11, w12, w13, w14);
      this.addToMain(container);
      return this;
    };

    U2A1.prototype.setNube2 = function() {
      var back, container, w21, w22;
      container = new createjs.Container();
      container.x = 291;
      container.y = 432;
      container.name = 'nube2';
      back = this.createBitmap('backNube2', 'n2', 0, 0);
      w21 = new ClickableText('w21', 'any', 0, 33, 10);
      w22 = new ClickableText('w22', "some", 1, 26, 35);
      container.addChild(back, w21, w22);
      this.addToLibrary(back, w21, w22);
      this.addToMain(container);
      return this;
    };

    U2A1.prototype.setNube3 = function() {
      var back, nube3, w31, w310, w32, w33, w34, w35, w36, w37, w38, w39;
      if (this.library.nube3) {
        nube3 = this.library.nube3;
      } else {
        nube3 = new createjs.Container();
        nube3.x = 421;
        nube3.y = 383;
        nube3.name = 'nube3';
        this.addToMain(nube3);
      }
      nube3.removeAllChildren();
      back = this.createBitmap('backNube3', 'n3', -6, 0);
      if (this.market === 1) {
        w31 = new ClickableText('w31', 'sugar', 0, 13, 34);
        w32 = new ClickableText('w32', "mushrooms", 1, 25, 75);
        w33 = new ClickableText('w33', 'peaches', 2, 92, 17);
        w34 = new ClickableText('w34', "peanut butter", 3, 67, 45);
        w35 = new ClickableText('w35', "corn", 4, 136, 74);
        w36 = new ClickableText('w36', "blueberries", 5, 99, 100);
        w37 = new ClickableText('w37', "fish", 6, 178, 12);
        w38 = new ClickableText('w38', "green peppers", 7, 199, 36);
        w39 = new ClickableText('w39', "strawberry jelly", 8, 196, 69);
        w310 = new ClickableText('w310', "apples", 9, 212, 106);
      } else {
        w31 = new ClickableText('w31', 'meat', 0, 13, 34);
        w32 = new ClickableText('w32', "honey", 1, 25, 75);
        w33 = new ClickableText('w33', 'cheese', 2, 92, 17);
        w34 = new ClickableText('w34', "milk", 3, 67, 45);
        w35 = new ClickableText('w35', "eggs", 4, 136, 74);
        w36 = new ClickableText('w36', "pumpkins", 5, 99, 100);
        w37 = new ClickableText('w37', "bacon", 6, 178, 12);
        w38 = new ClickableText('w38', "apples", 7, 199, 36);
        w39 = new ClickableText('w39', "yogurt", 8, 196, 69);
        w310 = new ClickableText('w310', "raspberries", 9, 212, 106);
      }
      nube3.addChild(back, w31, w32, w33, w34, w35, w36, w37, w38, w39, w310);
      this.addToLibrary(back, w31, w32, w33, w34, w35, w36, w37, w38, w39, w310);
      this.addToMain(nube3);
      return this;
    };

    U2A1.prototype.setDropper = function() {
      var dropper, h1, h2, h3, t;
      if (this.library.dropper) {
        dropper = this.library.dropper;
      } else {
        dropper = new createjs.Container();
        dropper.x = stageSize.w / 2 - 205;
        dropper.y = 540;
        dropper.name = 'dropper';
        this.addToMain(dropper);
      }
      dropper.removeAllChildren();
      t = new createjs.Text('There', '24px Arial', '#333');
      t.x = 20;
      t.y = 0;
      dropper.addChild(t);
      h1 = new WordContainer('wc1', '', '', '#eb2d3d', 90, 0, 60, 22);
      h2 = new WordContainer('wc2', '', '', '#eb2d3d', 160, 0, 80, 22);
      h3 = new WordContainer('wc3', '', '', '#eb2d3d', 250, 0, 140, 22);
      t = new createjs.Text('.', '24px Arial', '#333');
      t.x = 393;
      t.y = 0;
      dropper.addChild(t);
      dropper.addChild(h1, h2, h3);
      this.addToLibrary(h1, h2, h3);
      this.addToMain(dropper);
      return this;
    };

    U2A1.prototype.introEvaluation = function() {
      U2A1.__super__.introEvaluation.apply(this, arguments);
      TweenLite.from(this.library['header'], 1, {
        y: -this.library['header'].height
      });
      TweenLite.from(this.library['instructions'], 1, {
        alpha: 0,
        x: 0,
        delay: 0.5
      });
      TweenLite.from(this.library['nube1'], 1, {
        alpha: 0,
        y: this.library['nube1'].y + 50,
        delay: 1
      });
      TweenLite.from(this.library['nube2'], 1, {
        alpha: 0,
        y: this.library['nube2'].y + 50,
        delay: 1.1
      });
      TweenLite.from(this.library['nube3'], 1, {
        alpha: 0,
        y: this.library['nube3'].y + 50,
        delay: 1.2
      });
      return TweenLite.from(this.library['dropper'], 1, {
        alpha: 0,
        y: this.library['dropper'].y + 20,
        delay: 1.5,
        onComplete: this.playInstructions,
        onCompleteParams: [this]
      });
    };

    U2A1.prototype.initEvaluation = function(e) {
      var i, _i, _results;
      U2A1.__super__.initEvaluation.apply(this, arguments);
      this.blink(this.library[this.foodcollection[this.index].id]);
      this.blink(this.library['nube1']);
      _results = [];
      for (i = _i = 1; _i <= 4; i = _i += 1) {
        _results.push(this.library['w1' + i].addEventListener('click', this.evaluateAnswer1));
      }
      return _results;
    };

    U2A1.prototype.evaluateAnswer1 = function(e) {
      var i, _i, _j, _results;
      this.answer = e.target;
      if (this.answer.index === this.foodcollection[this.index].a1) {
        createjs.Sound.play('good');
        this.blink(this.library['nube1'], false);
        this.library['wc1'].changeText(this.answer.text.text);
        this.blink(this.library['nube2']);
        for (i = _i = 1; _i <= 4; i = _i += 1) {
          this.library['w1' + i].removeEventListener('click', this.evaluateAnswer1);
        }
        _results = [];
        for (i = _j = 1; _j <= 2; i = _j += 1) {
          _results.push(this.library['w2' + i].addEventListener('click', this.evaluateAnswer2));
        }
        return _results;
      } else {
        return this.warning();
      }
    };

    U2A1.prototype.evaluateAnswer2 = function(e) {
      var i, _i, _j, _results;
      this.answer = e.target;
      if (this.answer.index === this.foodcollection[this.index].a2) {
        createjs.Sound.play('good');
        this.blink(this.library['nube2'], false);
        this.library['wc2'].changeText(this.answer.text.text);
        this.blink(this.library['nube3']);
        for (i = _i = 1; _i <= 2; i = _i += 1) {
          this.library['w2' + i].removeEventListener('click', this.evaluateAnswer2);
        }
        _results = [];
        for (i = _j = 1; _j <= 10; i = _j += 1) {
          _results.push(this.library['w3' + i].addEventListener('click', this.evaluateAnswer3));
        }
        return _results;
      } else {
        return this.warning();
      }
    };

    U2A1.prototype.evaluateAnswer3 = function(e) {
      var i, _i;
      this.answer = e.target;
      if (this.answer.index === this.foodcollection[this.index].a3) {
        createjs.Sound.play('good');
        this.blink(this.library['nube3'], false);
        this.blink(this.library[this.foodcollection[this.index].id], false);
        this.library['wc3'].changeText(this.answer.text.text);
        for (i = _i = 1; _i <= 10; i = _i += 1) {
          this.library['w3' + i].removeEventListener('click', this.evaluateAnswer3);
        }
        return setTimeout(this.finishEvaluation, 1 * 1000);
      } else {
        return this.warning();
      }
    };

    U2A1.prototype.finishEvaluation = function() {
      this.library['score'].plusOne();
      return TweenLite.to(this.library['dropper'], 0.5, {
        alpha: 0,
        ease: Quart.easeOut,
        onComplete: this.nextEvaluation
      });
    };

    U2A1.prototype.nextEvaluation = function() {
      var i, _i;
      this.index++;
      if (this.index < this.foodcollection.length) {
        this.library['wc1'].changeText('');
        this.library['wc2'].changeText('');
        this.library['wc3'].changeText('');
        this.blink(this.library[this.foodcollection[this.index].id]);
        this.blink(this.library['nube1']);
        for (i = _i = 1; _i <= 4; i = _i += 1) {
          this.library['w1' + i].addEventListener('click', this.evaluateAnswer1);
        }
        return TweenLite.to(this.library['dropper'], 0.5, {
          alpha: 1,
          ease: Quart.easeOut
        });
      } else {
        this.library['wc1'].changeText('');
        this.library['wc2'].changeText('');
        this.library['wc3'].changeText('');
        TweenLite.to(this.library['dropper'], 0.5, {
          alpha: 1,
          ease: Quart.easeOut
        });
        if (this.market === 1) {
          this.market = 2;
          this.index = 0;
          return this.setFood(this.market).setNube3().setDropper().initEvaluation();
        } else {
          return this.finish();
        }
      }
    };

    U2A1.prototype.blink = function(obj, state) {
      if (state == null) {
        state = true;
      }
      TweenMax.killTweensOf(obj);
      obj.alpha = 1;
      if (state) {
        return TweenMax.to(obj, 0.5, {
          alpha: .5,
          repeat: -1,
          yoyo: true
        });
      }
    };

    U2A1.prototype.finish = function() {
      TweenLite.to(this.library['nube1'], 1, {
        alpha: 0,
        y: this.library['nube1'].y + 50,
        delay: 0.1
      });
      TweenLite.to(this.library['nube2'], 1, {
        alpha: 0,
        y: this.library['nube2'].y + 50,
        delay: 0.1
      });
      TweenLite.to(this.library['nube3'], 1, {
        alpha: 0,
        y: this.library['nube3'].y + 50,
        delay: 0.1
      });
      TweenLite.to(this.library['dropper'], 1, {
        alpha: 0,
        y: this.library['dropper'].y + 20,
        delay: 0.1
      });
      TweenLite.to(this.library['propmarket'], 1, {
        alpha: 0,
        y: this.library['propmarket'].y + 20,
        delay: 0.1
      });
      TweenLite.to(this.library['scene'], 1, {
        alpha: 0,
        y: this.library['scene'].y + 20,
        delay: 0.1
      });
      return U2A1.__super__.finish.apply(this, arguments);
    };

    window.U2A1 = U2A1;

    return U2A1;

  })(Oda);

}).call(this);
