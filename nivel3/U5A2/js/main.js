// Generated by CoffeeScript 1.6.3
(function() {
  var U5A2,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  U5A2 = (function(_super) {
    __extends(U5A2, _super);

    function U5A2() {
      this.clearEvaluation = __bind(this.clearEvaluation, this);
      this.finishEvaluation = __bind(this.finishEvaluation, this);
      this.evaluateAnswer = __bind(this.evaluateAnswer, this);
      this.initEvaluation = __bind(this.initEvaluation, this);
      var manifest, sounds;
      manifest = [
        {
          id: 'head',
          src: 'pleca1.png'
        }, {
          id: 'inst',
          src: 'inst.png'
        }, {
          id: 'c1',
          src: 'circle1.png'
        }, {
          id: 'c2',
          src: 'circle2.png'
        }, {
          id: 'repeatbtn',
          src: 'repeat-btn.png'
        }, {
          id: 'playagain',
          src: 'play_again.png'
        }, {
          id: 'startgame',
          src: 'start_game.png'
        }, {
          id: 'final',
          src: 'fondofinal.png'
        }, {
          id: 'cancion',
          src: 'cancion.png'
        }
      ];
      sounds = [
        {
          src: 'sounds/good.mp3',
          id: 'good'
        }, {
          src: 'sounds/TU3_U5_A2_instructions.mp3',
          id: 'instructions'
        }, {
          src: 'sounds/TU3_U5_A2_song.mp3',
          id: 'song'
        }, {
          src: 'sounds/wrong.mp3',
          id: 'wrong'
        }
      ];
      this.game = {
        answers: [
          {
            a: "was",
            x: 45,
            y: 0
          }, {
            a: "were",
            x: 32,
            y: 1
          }, {
            a: "was",
            x: 48,
            y: 2
          }, {
            a: "was",
            x: 220,
            y: 2
          }, {
            a: "wasn't",
            x: 32,
            y: 3
          }, {
            a: "weren't",
            x: 32,
            y: 4
          }, {
            a: "weren't",
            x: 255,
            y: 4
          }, {
            a: "was",
            x: 32,
            y: 5
          }, {
            a: "were",
            x: 65,
            y: 6
          }, {
            a: "was",
            x: 65,
            y: 7
          }, {
            a: "was",
            x: 32,
            y: 8
          }, {
            a: "was",
            x: 0,
            y: 9
          }
        ]
      };
      U5A2.__super__.constructor.call(this, null, manifest, sounds);
    }

    U5A2.prototype.setStage = function() {
      U5A2.__super__.setStage.apply(this, arguments);
      this.intento = 0;
      this.insertBitmap('header', 'head', stageSize.w / 2, 0, 'tc');
      this.insertBitmap('final', 'final', 650, 100, 'tc');
      this.insertInstructions('instructions', 'Drag the verbs to complete the song.', 40, 100);
      this.addToMain(new Score('score', this.preload.getResult('c1'), this.preload.getResult('c2'), 20, 500, 16, 0));
      return this.setcancion().setDropper().introEvaluation();
    };

    U5A2.prototype.setcancion = function() {
      var cancion, fondo, v1, v2, v3, v4;
      cancion = new createjs.Container();
      cancion.x = 47;
      cancion.y = 120;
      cancion.name = 'cancion';
      fondo = this.createBitmap('cancion', 'cancion', 0, 0);
      fondo.scaleX = fondo.scaleY = 0.7;
      cancion.addChild(fondo);
      v1 = new DroppableText('v1', "was", 0, 15, 12, this.stage);
      v2 = new DroppableText('v2', "wasn't", 1, 55, 12, this.stage);
      v3 = new DroppableText('v3', "were", 2, 110, 12, this.stage);
      v4 = new DroppableText('v4', "weren't", 3, 155, 12, this.stage);
      v1.text.font = v2.text.font = v3.text.font = v4.text.font = '14px Quicksand';
      this.addToLibrary(v1, v2, v3, v4);
      cancion.addChild(v1, v2, v3, v4);
      this.addToMain(cancion);
      return this;
    };

    U5A2.prototype.setDropper = function() {
      var dropper, h, i, _i, _ref;
      dropper = new createjs.Container();
      dropper.x = 70;
      dropper.y = 190;
      dropper.name = 'dropper';
      console.log(this.game.answers.length);
      for (i = _i = 0, _ref = this.game.answers.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
        h = new WordContainer("h" + i, '', '', '', this.game.answers[i].x, this.game.answers[i].y * 30.5, 85, 25);
        h.text.font = '20px Quicksand';
        h.index = i;
        dropper.addChild(h);
        this.addToLibrary(h);
        console.log(this.game.answers[i].a);
      }
      this.addToMain(dropper);
      return this;
    };

    U5A2.prototype.introEvaluation = function() {
      U5A2.__super__.introEvaluation.apply(this, arguments);
      TweenLite.from(this.library.header, 1, {
        y: -this.library.header.height
      });
      TweenLite.from(this.library.instructions, 1, {
        alpha: 0,
        x: 0,
        delay: 0.5
      });
      TweenLite.from(this.library.cancion, 1, {
        alpha: 0,
        delay: 1
      });
      TweenLite.to(this.library.final, 0, {
        alpha: 0
      });
      return TweenLite.from(this.library.dropper, 1, {
        alpha: 0,
        y: this.library.dropper.y + 20,
        delay: 1,
        onComplete: this.playInstructions,
        onCompleteParams: [this]
      });
    };

    U5A2.prototype.initEvaluation = function(e) {
      var i, _i, _results;
      U5A2.__super__.initEvaluation.apply(this, arguments);
      _results = [];
      for (i = _i = 1; _i <= 4; i = _i += 1) {
        this.library["v" + i].addEventListener('dropped', this.evaluateAnswer);
        _results.push(this.library["v" + i].initDragListener());
      }
      return _results;
    };

    U5A2.prototype.evaluateAnswer = function(e) {};

    U5A2.prototype.finishEvaluation = function() {
      createjs.Sound.play('song');
      TweenLite.from(this.library.final, 1, {
        alpha: 0
      });
      return setTimeout(this.clearEvaluation, 1 * 10000);
    };

    U5A2.prototype.clearEvaluation = function(e) {
      TweenLite.to(this.library.dropper, 0.5, {
        alpha: 0,
        y: this.library.dropper.y + 20,
        onComplete: this.nextEvaluation
      });
      return this.finish();
    };

    U5A2.prototype.finish = function() {
      TweenLite.to(this.library.cancion, 1, {
        alpha: 0
      });
      return U5A2.__super__.finish.apply(this, arguments);
    };

    window.U5A2 = U5A2;

    return U5A2;

  })(Oda);

}).call(this);
