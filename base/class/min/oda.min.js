(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i=[].slice;window.stageSize||(window.stageSize={w:800,h:600,r:1}),Array.prototype.toDictionary=function(t){var e,i,r,a;for(e={},r=0,a=this.length;a>r;r++)i=this[r],null!=i[t]&&(e[i[t]]=i);return e},Array.prototype.where=function(t){var e;return"object"!=typeof t?[]:(e=Object.keys(t).length,this.filter(function(i){var r,a,n;a=0;for(r in t)n=t[r],i[r]===n&&(a+=1);return a===e?!0:!1}))},Array.prototype.unique=function(){var t,e,i,r,a,n;for(e={},t=r=0,a=this.length;a>=0?a>r:r>a;t=a>=0?++r:--r)e[this[t]]=this[t];n=[];for(t in e)i=e[t],n.push(i);return n},t=function(){function t(t,i,r){var a,n;this.imgurl=null!=t?t:"imgs/",this.warningComplete=e(this.warningComplete,this),this.playAgain=e(this.playAgain,this),this.handlePlayAgain=e(this.handlePlayAgain,this),this.initEvaluation=e(this.initEvaluation,this),this.initMobileInstructions=e(this.initMobileInstructions,this),this.handleComplete=e(this.handleComplete,this),this.handleProgress=e(this.handleProgress,this),a=[{id:"sg",src:""+this.imgurl+"start_game.png"},{id:"pa",src:""+this.imgurl+"play_again.png"}],this.assets=new Array,this.manifest=function(){var t,e,r;for(r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push({id:""+n.id,src:""+(this.imgurl+n.src)});return r}.call(this),Array.prototype.push.apply(this.manifest,a),Array.prototype.push.apply(this.manifest,r)}return t.prototype.initialize=function(){return this.initStage().initContainer().initPreloader().resize(),this},t.prototype.initStage=function(){return this.stage=new createjs.Stage("oda"),createjs.Ticker.addEventListener("tick",this.stage),createjs.Ticker.setFPS(60),createjs.Touch.enable(this.stage),this.stage.enableMouseOver(),this},t.prototype.initContainer=function(){return this.mainContainer=new createjs.Container,this.mainContainer.regX=stageSize.w/2,this.mainContainer.regY=stageSize.h/2,this.stage.addChild(this.mainContainer),this},t.prototype.initPreloader=function(){var t,e,i,r;for(this.preload=new createjs.LoadQueue(!1),this.loadStep=0,this.barHeight=7,this.barWidth=35,this.loaderColor=null!=(r=$("#oda").data("loadercolor"))?r:"#E62922",this.loaderBar=new createjs.Container,this.loaderBar.x=stageSize.w/2,this.loaderBar.y=stageSize.h/2,e=i=1;13>=i;e=i+=1)t=new createjs.Shape,t.graphics.setStrokeStyle(1).beginStroke(this.loaderColor).beginFill(this.loaderColor).drawRoundRect(0,0,this.barWidth,this.barHeight,5),t.regX=-20,t.regY=this.barHeight/2,t.rotation=30*(e-1),t.alpha=.05,t.name="bar"+e.toString(),this.loaderBar.addChild(t);return this.preload.installPlugin(createjs.Sound),this.preload.addEventListener("progress",this.handleProgress),this.preload.addEventListener("complete",this.handleComplete),this.preload.loadManifest(this.manifest),this.mainContainer.addChild(this.loaderBar),TweenLite.from(this.loaderBar,1,{alpha:.1,ease:Quart.easeOut}),this},t.prototype.handleProgress=function(t){var e;return e=Math.round(100*this.preload.progress),t.loaded>=this.loadStep/12&&this.loadStep<12?(this.showBar("bar"+(this.loadStep+1)),this.loadStep++):void 0},t.prototype.handleComplete=function(){return this.preload.removeEventListener("progress",this.handleProgress),this.preload.removeEventListener("complete",this.handleComplete),TweenLite.to(this.loaderBar,1,{alpha:0,ease:Quart.easeOut}),this.setStage()},t.prototype.showBar=function(t){return TweenLite.to(this.loaderBar.getChildByName(t),2.5,{alpha:1,ease:Quart.easeOut})},t.prototype.setStage=function(){return this.index=0,this.observer=new Observer},t.prototype.introEvaluation=function(){return this.library.score&&this.library.score?this.library.score.reset():void 0},t.prototype.playInstructions=function(t){var e;return dealersjs.mobile.isIOS()||dealersjs.mobile.isAndroid()?(t.insertBitmap("start","sg",stageSize.w/2,stageSize.h/2,"mc"),t.library.start.addEventListener("click",t.initMobileInstructions),TweenLite.from(t.library.start,.3,{alpha:0,y:t.library.start.y+20})):(e=createjs.Sound.play("instructions"),e.addEventListener("complete",t.initEvaluation))},t.prototype.initMobileInstructions=function(t){var e;return t.target.removeEventListener("click",this.initMobileInstructions),createjs.Sound.stop(),e=createjs.Sound.play("instructions"),e.addEventListener("complete",this.initEvaluation),TweenLite.to(this.library.start,.3,{alpha:0,y:this.library.start.y+20,onComplete:this.removeMobileInstructions,onCompleteParams:[this]})},t.prototype.removeMobileInstructions=function(t){return t.mainContainer.removeChild(t.library.start)},t.prototype.initEvaluation=function(){return this.observer.notify("init_evaluation")},t.prototype.finish=function(){return this.insertBitmap("play_again","pa",stageSize.w/2,stageSize.h/2,"mc"),this.library.play_again.addEventListener("click",this.handlePlayAgain),TweenLite.from(this.library.play_again,.5,{alpha:0,y:this.library.play_again.y-20})},t.prototype.handlePlayAgain=function(){return this.library.play_again.removeEventListener("click",this.handlePlayAgain),TweenLite.to(this.library.play_again,.5,{alpha:0,y:this.library.play_again.y-20,onComplete:this.playAgain})},t.prototype.playAgain=function(){return this.mainContainer.removeAllChildren(),this.setStage()},t.prototype.warning=function(){return createjs.Sound.play("wrong"),TweenMax.to(this.mainContainer,.1,{x:this.mainContainer.x+10,repeat:6,yoyo:!0,onComplete:this.warningComplete}),this},t.prototype.warningComplete=function(){return this.mainContainer.x=this.stage.canvas.width/2},t.prototype.resize=function(){var t,e;return e=window.innerWidth,t=window.innerHeight,stageSize.r=Math.min(e/stageSize.w,t/stageSize.h),this.mainContainer.scaleX=stageSize.r,this.mainContainer.scaleY=stageSize.r,$("#oda").width(e),this.stage.canvas.width=e,this.stage.canvas.height=t,this.mainContainer.x=this.stage.canvas.width/2,this.mainContainer.y=this.stage.canvas.height/2,this},t.prototype.tick=function(){return this.stage.update()},t.prototype.insertInstructions=function(t,e,i,r){var a,n;return a=new createjs.Container,a.name=t,a.x=i,a.y=r,n=new createjs.Shape,n.graphics.beginFill("#bcd748").moveTo(0,0).lineTo(8,5).lineTo(0,10),n.y=5,e=this.createText("insttext",e,"16px Roboto","#000",14,0),a.addChild(n,e),this.addToMain(a)},t.prototype.createBitmap=function(t,e,i,r,a){var n,s;switch(null==a&&(a="tl"),s=this.preload.getResult(e),n=new createjs.Bitmap(s),n.x=i,n.y=r,n.width=s.width,n.height=s.height,n.name=t,a){case"tc":this.setReg(n,s.width/2,0);break;case"tr":this.setReg(n,s.width,0);break;case"ml":this.setReg(n,0,s.height/2);break;case"mc":this.setReg(n,s.width/2,s.height/2);break;case"mr":this.setReg(n,s.width,s.height/2);break;case"bl":this.setReg(n,0,s.height);break;case"bc":this.setReg(n,s.width/2,s.height);break;case"br":this.setReg(n,s.width,s.height);break;default:this.setReg(n,0,0)}return n},t.prototype.insertBitmap=function(t,e,i,r,a){var n;return null==a&&(a="tl"),n=this.createBitmap(t,e,i,r,a),this.addToMain(n),n},t.prototype.createSprite=function(t,e,i,r,a,n){var s,o,h,l,u,g;switch(null==i&&(i=null),null==n&&(n="tl"),u=function(){var t,i,r;for(r=[],t=0,i=e.length;i>t;t++)h=e[t],r.push(this.preload.getResult(h));return r}.call(this),g=u[0].width,o=u[0].height,l=new createjs.SpriteSheet({images:u,animations:i,frames:{width:g,height:o}}),s=new createjs.Sprite(l),s.x=r,s.y=a,s.width=g,s.height=o,s.name=t,s.currentFrame=0,n){case"tc":this.setReg(s,s.width/2,0);break;case"tr":this.setReg(s,s.width,0);break;case"ml":this.setReg(s,0,s.height/2);break;case"mc":this.setReg(s,s.width/2,s.height/2);break;case"mr":this.setReg(s,s.width,s.height/2);break;case"bl":this.setReg(s,0,s.height);break;case"bc":this.setReg(s,s.width/2,s.height);break;case"br":this.setReg(s,s.width,s.height);break;default:this.setReg(s,0,0)}return s},t.prototype.insertSprite=function(t,e,i,r,a,n){var s;return null==i&&(i=null),null==n&&(n="tl"),s=this.createSprite(t,e,i,r,a,n),this.addToMain(s),s},t.prototype.createText=function(t,e,i,r,a,n,s){var o;return null==s&&(s="left"),o=new createjs.Text(e,i,r),o.name=t,o.x=a,o.y=n,o.textAlign=s,o},t.prototype.insertText=function(t,e,i,r,a,n,s){var o;return null==s&&(s="left"),o=this.createText(t,e,i,r,a,n,s),this.addToMain(o),o},t.prototype.addToMain=function(){var t,e,r,a;for(e=1<=arguments.length?i.call(arguments,0):[],this.addToLibrary(e),r=0,a=e.length;a>r;r++)t=e[r],this.mainContainer.addChild(t);return this.mainContainer},t.prototype.addToLibrary=function(){var t,e,r,a,n,s,o;if(e=arguments[0],r=2<=arguments.length?i.call(arguments,1):[],this.isArray(e))for(a=0,s=e.length;s>a;a++)t=e[a],this.assets.push(t);else for(this.assets.push(e),n=0,o=r.length;o>n;n++)t=r[n],this.assets.push(t);return this.library=this.assets.toDictionary("name"),this.library},t.prototype.setReg=function(t,e,i){return t.regX=e,t.regY=i,t},t.prototype.setPosition=function(t,e,i){return t.x=e,t.y=i,t},t.prototype.shuffleNoRepeat=function(t,e){var i,r,a,n,s;for(i=t.slice(0),n=Array(),r=s=1;e>=1?e>=s:s>=e;r=e>=1?++s:--s)a=Math.round(Math.random()*(i.length-1)),n.push(i[a]),i.splice(a,1);return n},t.prototype.shuffle=function(t){var e,i,r,a,n,s;for(e=t.slice(0),i=a=n=e.length-1;0>=n?0>=a:a>=0;i=0>=n?++a:--a)r=Math.floor(Math.random()*(i+1)),s=[e[r],e[i]],e[i]=s[0],e[r]=s[1];return e},t.prototype.clone=function(t){var e,i,r;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e="",null!=t.global&&(e+="g"),null!=t.ignoreCase&&(e+="i"),null!=t.multiline&&(e+="m"),null!=t.sticky&&(e+="y"),new RegExp(t.source,e);r=new t.constructor;for(i in t)r[i]=this.clone(t[i]);return r},t.prototype.isArray=function(t){return Array.isArray(t||function(t){return"[object Array]"==={}.toString.call(t)})},t.prototype.debuggable=function(t){var e,i,r,a,n,s,o=this;return i=13,n=32,s=38,e=40,r=37,a=39,this.debugged=t,document.addEventListener("keyup",function(t){switch(t.keyCode){case s:o.debugged.y-=10;break;case e:o.debugged.y+=10;break;case r:o.debugged.x-=10;break;case a:o.debugged.x+=10}return console.log(o.debugged.x,o.debugged.y)}),this.debugged.addEventListener("mousedown",function(t){var e,i,r;return i=t.stageX/stageSize.r,r=t.stageY/stageSize.r,e={x:i-o.debugged.x,y:r-o.debugged.y},o.debugged.x=i-e.x,o.debugged.y=r-e.y,t.addEventListener("mousemove",function(t){return i=t.stageX/stageSize.r,r=t.stageY/stageSize.r,o.debugged.x=i-e.x,o.debugged.y=r-e.y,!1}),t.addEventListener("mouseup",function(){return console.log(o.debugged)}),o.debugged}),this.debugged},t.prototype.blink=function(t,e){return null==e&&(e=!0),TweenMax.killTweensOf(t),t.alpha=1,e?TweenMax.to(t,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},window.Oda=t,t}()}).call(this);