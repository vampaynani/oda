(function(){var t,e,i,n,s,r,a,o,h,l,u,c,p,d,f,g,y,m,b,w,x,v,T,C,S,_,z,k,E,L,A,O,j,M,D,F,P,I,B,W,X,R,G,Y,H,N,U,Q,V,q,K,J,Z,te,ee,ie,ne,se,re,ae=[].slice,oe=function(t,e){return function(){return t.apply(e,arguments)}},he=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},le={}.hasOwnProperty,ue=function(t,e){function i(){this.constructor=t}for(var n in e)le.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};null==window.dealersjs&&(window.dealersjs={}),null==window.d2oda&&(window.d2oda={}),null==window.lib&&(window.lib={}),null==(q=window.dealersjs).mobile&&(q.mobile=_=function(){function t(){}return t.user_agent=navigator.userAgent.toLowerCase(),t.isIOS=function(){return!0===this.isIpad()||!0===this.isIphone()||!0===this.isIpod()?!0:!1},t.isIpad=function(){return this.user_agent.indexOf("ipad")>-1},t.isIphone=function(){return this.user_agent.indexOf("iphone")>-1},t.isIpod=function(){return this.user_agent.indexOf("ipod")>-1},t.isAndroid=function(){return this.user_agent.indexOf("android")>-1},t.isMobile=function(){return this.user_agent.indexOf("mobile")>-1},t}()),null==(K=window.d2oda).utilities&&(K.utilities=H=function(){function t(){}return t.shuffleNoRepeat=function(t,e){var i,n,s,r,a;for(i=t.slice(0),r=Array(),n=a=1;e>=1?e>=a:a>=e;n=e>=1?++a:--a)s=Math.round(Math.random()*(i.length-1)),r.push(i[s]),i.splice(s,1);return r},t.shuffle=function(t){var e,i,n,s,r,a;for(e=t.slice(0),i=s=r=e.length-1;0>=r?0>=s:s>=0;i=0>=r?++s:--s)n=Math.floor(Math.random()*(i+1)),a=[e[n],e[i]],e[i]=a[0],e[n]=a[1];return e},t.clone=function(t){var e,i,n;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e="",null!=t.global&&(e+="g"),null!=t.ignoreCase&&(e+="i"),null!=t.multiline&&(e+="m"),null!=t.sticky&&(e+="y"),new RegExp(t.source,e);n=new t.constructor;for(i in t)n[i]=this.clone(t[i]);return n},t.isArray=function(t){return Array.isArray(t||function(){}),"[object Array]"==={}.toString.call(t)},t}()),null==(J=window.d2oda).behaviors&&(J.behaviors=i=function(){function t(){}return t.initDragListener=function(){return t.addEventListener("mousedown",t.handleMouseDown)},t.endDragListener=function(){return t.removeEventListener("mousedown",t.handleMouseDown)},t}.call(this)),null==(Z=window.d2oda).actions&&(Z.actions=e=function(){function t(){}return t.fadeOut=function(){return TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),0===this.alpha?(this.y-=20,TweenLite.from(this,.5,{alpha:1,y:this.y+20})):(this.y+=20,TweenLite.to(this,.5,{alpha:0,y:this.y-20}))},t.fadeIn=function(){return TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),1===this.alpha?(this.y-=20,TweenLite.from(this,.5,{alpha:0,y:this.y+20})):(this.y+=20,TweenLite.to(this,.5,{alpha:1,y:this.y-20}))},t.pulse=function(t){return null==t&&(t=!0),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.alpha=1,t?TweenMax.to(this,.5,{scaleX:.8,scaleY:.8,repeat:-1,yoyo:!0}):void 0},t.blink=function(t){return null==t&&(t=!0),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),this.alpha=1,t?TweenMax.to(this,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},t.hide=function(){return this.visible=!1},t.setInOrigin=function(){return this.x=this.pos.x,this.y=this.pos.y},t.putInPlace=function(t,e,i,n){return null==e&&(e=1),null==i&&(i=1),null==n&&(n=1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),TweenLite.to(this,1,{ease:Back.easeOut,delay:.1,x:t.x,y:t.y,alpha:e,scaleX:i,scaleY:n})},t.returnToPlace=function(t,e,i){return null==t&&(t=1),null==e&&(e=1),null==i&&(i=1),TweenMax.killTweensOf(this),TweenLite.killTweensOf(this),TweenLite.to(this,.5,{ease:Back.easeOut,delay:.1,x:this.pos.x,y:this.pos.y,alpha:t,scaleX:e,scaleY:i})},t}()),null==(te=window.d2oda).methods&&(te.methods=S=function(){function t(){}return t.createBitmap=function(t,e,i,n,s){var r,a;return null==s&&(s="tl"),a=lib.preloader.preload.getResult(e),r=new createjs.Bitmap(a),r.x=i,r.y=n,r.width=a.width,r.height=a.height,r.name=t,this.setPosition(s,r),r},t.insertBitmap=function(t,e,i,n,s){var r;return null==s&&(s="tl"),r=this.createBitmap(t,e,i,n,s),this.add(r),r},t.createText=function(t,e,i,n,s,r,a){var o;return null==a&&(a="left"),o=new createjs.Text(e,i,n),o.name=t,o.x=s,o.y=r,o.textAlign=a,o},t.insertText=function(t,e,i,n,s,r,a){var o;return null==a&&(a="left"),o=this.createText(t,e,i,n,s,r,a),this.add(o),o},t.createSprite=function(t,e,i,n,s,r){var a,o,h,l,u,c;return null==i&&(i=null),null==r&&(r="tl"),u=function(){var t,i,n;for(n=[],t=0,i=e.length;i>t;t++)h=e[t],n.push(lib.preloader.preload.getResult(h));return n}(),c=u[0].width,o=u[0].height,l=new createjs.SpriteSheet({images:u,animations:i,frames:{width:c,height:o}}),a=new createjs.BitmapAnimation(l),a.x=n,a.y=s,a.width=c,a.height=o,a.name=t,a.currentFrame=0,this.setPosition(r,a),a},t.insertSprite=function(t,e,i,n,s,r){var a;return null==i&&(i=null),null==r&&(r="tl"),a=this.createSprite(t,e,i,n,s,r),this.add(a),a},t.setPosition=function(t,e){switch(null==e&&(e=null),e||(e=this),t){case"tc":return this.setReg(e,e.width/2,0);case"tr":return this.setReg(e,e.width,0);case"ml":return this.setReg(e,0,e.height/2);case"mc":return this.setReg(e,e.width/2,e.height/2);case"mr":return this.setReg(e,e.width,e.height/2);case"bl":return this.setReg(e,0,e.height);case"bc":return this.setReg(e,e.width/2,e.height);case"br":return this.setReg(e,e.width,e.height);default:return this.setReg(e,0,0)}},t.setReg=function(t,e,i){return t.regX=e,t.regY=i,t},t.add=function(t,e){return null==e&&(e=!0),this.addChild(t),e?lib[t.name]=t:void 0},t.delay=function(){var t,e,i;return i=arguments[0],e=arguments[1],t=3<=arguments.length?ae.call(arguments,2):[],setTimeout.apply(null,[e,i].concat(ae.call(t)))},t}()),null==(ee=window.d2oda).stage&&(ee.stage={w:800,h:600,r:1}),null==(ie=window.d2oda).evaluator&&(ie.evaluator=p=function(){function t(){}return t.success=null,t.evaluate=function(t,e,i){if(console.log(t,e,i),t instanceof Function)return t(e,i),void 0;switch(t){case"repeat":return this.evaluateRepeat();case"finish":return this.evaluateFinish(i);case"global_01":return this.evaluateGlobal01(e);case"click_O1":return this.evaluateClick01(e,i);case"click_O1_01":return this.evaluateClick01_01(e,i);case"click_02":return this.evaluateClick02(e,i);case"click_03":return this.evaluateClick03(e,i);case"drop_01":return this.evaluateDrop01(e,i);case"drop_02":return this.evaluateDrop02(e,i);case"drop_02_01":return this.evaluateDrop02_01(e,i);case"drop_02_02":return this.evaluateDrop02_02(e,i);case"drop_03":return this.evaluateDrop03(e,i);case"drop_04":return this.evaluateDrop04(e,i);case"clon_01":return this.evaluateClon01(e,i);case"switch_01":return this.evaluateSwitch01(e,i);case"choose_01":return this.evaluateChoose01(e);case"show_choose_01":return this.evaluateShowChoose01(e,i);case"hangman_click_01":return this.evaluateHangmanClick01(e,i);case"show_click_01":return this.evaluateShowClick01(e,i);case"phrase_drop_01":return this.evaluatePhraseDrop01(e,i);case"phrase_drop_02":return this.evaluatePhraseDrop02(e,i);case"phrase_drop_03":return this.evaluatePhraseDrop03(e,i);case"sprite_drop_01":return this.evaluateSpriteDrop01(e,i);case"word_drop_01":return this.evaluateWordDrop01(e,i);case"word_complete_01":return this.evaluateWordComplete01(e,i)}},t.evaluateRepeat=function(){return createjs.Sound.stop(),createjs.Sound.play(lib.scene.snd)},t.evaluateFinish=function(t){var e,i,n,s,r,a,o,h;if(lib[t].droptargets)for(o=lib[t].droptargets,n=0,r=o.length;r>n;n++)e=o[n],e.showEvaluation(),e.complete&&lib.score.plusOne();else if(lib[t].group)for(h=lib[t].group,s=0,a=h.length;a>s;s++)i=h[s],console.log(lib[i].complete),lib[i].complete&&lib.score.plusOne();return lib.scene.success(!1)},t.evaluateGlobal01=function(t){return lib[t].index===this.success?lib.scene.success():lib.scene.fail()},t.evaluateGlobal02=function(t){return lib[t].index===this.success?(lib.scene.success(),lib.scene.nextStep()):lib.scene.fail()},t.evaluateHangmanClick01=function(t,e){var i,n,s,r,a,o,h,l,u;for(s=!0,lib[t].visible=!1,l=lib[e].droptargets,r=0,o=l.length;o>r;r++)n=l[r],lib[t].index===n.success&&(n.update({complete:!0}),s=!1),console.log(lib[t].index,n.success,s);if(s)lib.scene.fail(),lib.hangman.current++,lib.hangman.current>=lib.hangman.group.length?(lib.hangman.current=0,lib.scene.nextStep()):lib.hangman.update({type:"fadeIn",target:lib.hangman.group[lib.hangman.current]});else for(i=!0,u=lib[e].droptargets,a=0,h=u.length;h>a;a++)n=u[a],n.complete||(i=!1);return i?lib.scene.success():void 0},t.evaluateShowClick01=function(t,e){return lib[e].update({type:"fadeIn",target:lib[t].index})},t.evaluateWordDrop01=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?(lib[e.parent.target][e.parent.fx](),lib.scene.success(),e.parent.onComplete()):void 0)},t.evaluateWordComplete01=function(t,e){var i;return i=lib[t].oncomplete.index,lib[e].words[i].enabled=!0},t.evaluateClick01=function(t,e){var i,n,s;return i=lib[t].index,s=lib[e].droptargets,n=lib[e].currentTarget,i!==s[n].success?lib.scene.fail():(s[n].complete=!0,s[n].update(),lib[e].currentTarget++,lib[e].currentTarget===s.length?lib.scene.success():void 0)},t.evaluateClick01_01=function(t,e){var i,n,s,r;return i=lib[t].index,s=lib[e].droptargets,n=lib[e].currentTarget,i!==s[n].success?lib.scene.fail():(s[n].complete=!0,s[n].update(),lib[e].currentTarget++,lib[e].currentTarget===s.length?(r=lib[e].nextGroup,lib.score.plusOne(),createjs.Sound.play("s/good"),lib[r].setInvisible(!1)):void 0)},t.evaluateClick02=function(t,e){return lib[t].index===lib[e].success?(lib[e].complete=!0,lib[t].updateState(),lib.scene.success()):lib.scene.fail()},t.evaluateClick03=function(t,e){var i,n;return n=lib[e].targets,i=lib[e].currentTarget,lib[t].index===lib[e].success?(n[i].complete=!0,lib[e].fadeOut(n[i]),lib.scene.success(!1),createjs.Sound.play("s/good"),lib[e].currentTarget++):(lib[e].warnings++,lib.scene.fail(),3===lib[e].warnings?(lib.score.stop(),lib.game.nextScene()):void 0)},t.evaluateDrop01=function(t,e){return lib[t].afterSuccess({x:e.x,y:e.y}),lib[t].index===e.success?e.update():e.update(!1)},t.evaluateDrop02=function(t,e){return lib[t].index===e.success?(e.update(),lib[t].afterSuccess(),lib.scene.success()):(lib[t].afterFail(),lib.scene.fail())},t.evaluateDrop02_01=function(t,e){var i,n,s,r,a,o,h,l;for(i=!0,lib[t].index===e.success?e.update(lib[t].label.text,!0):e.update(lib[t].label.text,!1),lib[t].afterSuccess(),h=lib[t].droptargets,s=0,a=h.length;a>s;s++)n=h[s],""===n.text.text&&(i=!1);if(i){for(l=lib[t].droptargets,r=0,o=l.length;o>r;r++)n=l[r],n.showEvaluation(),n.complete&&lib.score.plusOne();return lib.scene.success(!1)}},t.evaluateDrop02_02=function(t,e){return lib[t].index===e.success?(e.update({complete:!0}),lib[t].afterSuccess(),lib.scene.success()):(lib[t].afterFail(),lib.scene.fail())},t.evaluateDrop03=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?(lib[e.parent.target].fadeOut(),lib.scene.success()):void 0)},t.evaluatePhraseDrop01=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,lib.score.plusOne(),createjs.Sound.play("s/good"),e.parent.currentTarget===e.parent.droptargets.length?lib.scene.success(!1):void 0)},t.evaluatePhraseDrop02=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?lib.scene.success():void 0)},t.evaluatePhraseDrop03=function(t,e){return lib[t].index!==e.success?(lib[t].afterFail(),lib.scene.fail()):(e.complete=!0,e.update(),lib[t].afterSuccess(),e.parent.currentTarget++,e.parent.currentTarget===e.parent.droptargets.length?(e.parent.fadeOut(),lib.scene.success()):void 0)},t.evaluateSpriteDrop01=function(t,e){return lib[t].index===e.parent.success?(e.parent.nextStep(),lib[t].afterSuccess(),lib.scene.success(!0,!1)):(lib[t].afterFail(),lib.scene.fail())},t.evaluateDrop04=function(t,e){return lib[t].index===e.success?(e.update({complete:!0}),lib[t].afterSuccess(),e.parent.evaluateWords()):(lib[t].afterFail(),lib.scene.fail())},t.evaluateClon01=function(t,e){return lib[t].index===e.success?e.update(!0,lib[t].bmpid):e.update(!1,lib[t].bmpid),lib[t].afterSuccess()},t.evaluateSwitch01=function(t,e){return lib[t].index===lib[e].success?(lib[e].doSwitch(),lib.scene.success()):lib.scene.fail()},t.evaluateShowChoose01=function(t,e){var i,n,s,r,a,o,h;if(console.log(t,e),s=lib[t].index-1,d2oda.utilities.isArray(e)){for(h=[],a=0,o=e.length;o>a;a++)r=e[a],n=lib[r].group[s],h.push(i=lib[r].update({type:"fadeIn",target:n}));return h}},t.evaluateChoose01=function(t){return lib.scene.choose=lib[t].index,lib.scene.success(!1)},t}()),Array.prototype.toDictionary=function(t){var e,i,n,s;for(e={},n=0,s=this.length;s>n;n++)i=this[n],null!=i[t]&&(e[i[t]]=i);return e},Array.prototype.where=function(t){var e;return"object"!=typeof t?[]:(e=Object.keys(t).length,this.filter(function(i){var n,s,r;s=0;for(n in t)r=t[n],i[n]===r&&(s+=1);return s===e?!0:!1}))},Array.prototype.unique=function(){var t,e,i,n,s,r;for(e={},t=n=0,s=this.length;s>=0?s>n:n>s;t=s>=0?++n:--n)e[this[t]]=this[t];r=[];for(t in e)i=e[t],r.push(i);return r},Array.prototype.compare=function(t){var e;if(e=this.length,e!==t.length)return!1;for(;e--;)if(this[e]!==t[e])return!1;return!0},Array.prototype.merge=function(t){return Array.prototype.push.apply(this,t)},E=function(){function t(){this.playAgain=oe(this.playAgain,this),this.handlePlayAgain=oe(this.handlePlayAgain,this),this.endGame=oe(this.endGame,this),this.initGame=oe(this.initGame,this),this.removeMobileInstructions=oe(this.removeMobileInstructions,this),this.initMobileInstructions=oe(this.initMobileInstructions,this),this.playInstructions=oe(this.playInstructions,this),this.setGame=oe(this.setGame,this);var t,e,i;lib.preloader=new O,lib.mainContainer=new C,t="assets/",e=[{id:"sg",src:""+t+"start_game.png"},{id:"pa",src:""+t+"play_again.png"},{id:"s/boing",src:""+t+"boing.mp3"},{id:"s/good",src:""+t+"good.mp3"},{id:"s/wrong",src:""+t+"wrong.mp3"}],this.manifest=function(){var e,n,s,r;for(s=this.manifest,r=[],e=0,n=s.length;n>e;e++)i=s[e],r.push({id:""+i.id,src:""+(t+i.src)});return r}.call(this),Array.prototype.push.apply(this.manifest,e),this._setStage().resize(),lib.preloader.addEventListener("complete",this.setGame),lib.preloader.load(this.manifest)}return t.prototype.resize=function(){var t,e;return e=window.innerWidth,t=window.innerHeight,d2oda.stage.r=Math.min(e/d2oda.stage.w,t/d2oda.stage.h),lib.mainContainer.scaleX=d2oda.stage.r,lib.mainContainer.scaleY=d2oda.stage.r,$("#oda").width(e),this.stage.canvas.width=e,this.stage.canvas.height=t,lib.mainContainer.x=this.stage.canvas.width/2,lib.mainContainer.y=this.stage.canvas.height/2,this},t.prototype.setGame=function(){var t;return lib.mainContainer.removeAllChildren(),t=d2oda.utilities.clone(this.game),lib.game=new d(t),this.playInstructions()},t.prototype.playInstructions=function(){var t;return dealersjs.mobile.isIOS()||dealersjs.mobile.isAndroid()?(lib.mainContainer.insertBitmap("start","sg",d2oda.stage.w/2,d2oda.stage.h/2,"mc"),lib.start.addEventListener("click",this.initMobileInstructions),TweenLite.from(lib.start,.3,{alpha:0,y:lib.start+20})):(t=lib.instructions.playSound("s/instructions"),t.addEventListener("complete",this.initGame))},t.prototype.initMobileInstructions=function(t){var e;return e=lib.instructions.playSound("s/instructions"),t.target.removeEventListener("click",this.initMobileInstructions),e.addEventListener("complete",this.initGame),TweenLite.to(lib.start,.3,{alpha:0,y:lib.start.y+20,onComplete:this.removeMobileInstructions})},t.prototype.removeMobileInstructions=function(){return lib.mainContainer.removeChild(lib.start)},t.prototype.initGame=function(){return lib.game.start()},t.prototype.endGame=function(){return createjs.Sound.stop(),lib.mainContainer.insertBitmap("play_again","pa",d2oda.stage.w/2,d2oda.stage.h/2,"mc"),lib.play_again.addEventListener("click",this.handlePlayAgain),TweenLite.from(lib.play_again,.5,{alpha:0,y:lib.play_again.y-20})},t.prototype.handlePlayAgain=function(){return lib.play_again.removeEventListener("click",this.handlePlayAgain),TweenLite.to(lib.play_again,.5,{alpha:0,y:lib.play_again.y-20,onComplete:this.playAgain})},t.prototype.playAgain=function(){return this.setGame()},t.prototype.tick=function(){return this.stage.update()},t.prototype._setStage=function(){return this.stage=new createjs.Stage("oda"),createjs.Ticker.addListener(this),createjs.Ticker.setFPS(60),createjs.Touch.enable(this.stage),this.stage.enableMouseOver(50),this.stage.addChild(lib.mainContainer),lib.preloader.mainContainer=lib.mainContainer,this},window.Oda=t,t}(),O=function(){function t(){this.handleComplete=oe(this.handleComplete,this),this.handleProgress=oe(this.handleProgress,this),this.initialize()}return t.prototype=new createjs.EventDispatcher,t.prototype.EventDispatcher_initialize=t.prototype.initialize,t.prototype.initialize=function(){var t,e,i,n,s;for(this.EventDispatcher_initialize(),this.preload=new createjs.LoadQueue(!1),this.loadStep=0,this.barHeight=7,this.barWidth=35,this.loaderColor=null!=(n=$("#oda").data("loadercolor"))?n:"#E62922",this.loaderBar=new createjs.Container,this.loaderBar.x=d2oda.stage.w/2,this.loaderBar.y=d2oda.stage.h/2,s=[],e=i=1;13>=i;e=i+=1)t=new createjs.Shape,t.graphics.setStrokeStyle(1).beginStroke(this.loaderColor).beginFill(this.loaderColor).drawRoundRect(0,0,this.barWidth,this.barHeight,5),t.regX=-20,t.regY=this.barHeight/2,t.rotation=30*(e-1),t.alpha=.05,t.name="bar"+e.toString(),s.push(this.loaderBar.addChild(t));return s},t.prototype.load=function(t){return this.preload.installPlugin(createjs.Sound),this.preload.addEventListener("progress",this.handleProgress),this.preload.addEventListener("complete",this.handleComplete),this.preload.loadManifest(t),this.mainContainer.addChild(this.loaderBar),TweenLite.from(this.loaderBar,1,{alpha:.1,ease:Quart.easeOut}),this},t.prototype.handleProgress=function(t){var e;return e=Math.round(100*this.preload.progress),t.loaded>=this.loadStep/12&&this.loadStep<12?(this.showBar("bar"+(this.loadStep+1)),this.loadStep++):void 0},t.prototype.handleComplete=function(){return this.preload.removeEventListener("progress",this.handleProgress),this.preload.removeEventListener("complete",this.handleComplete),this.dispatchEvent({type:"complete"}),TweenLite.to(this.loaderBar,1,{alpha:0,ease:Quart.easeOut})},t.prototype.showBar=function(t){return TweenLite.to(this.loaderBar.getChildByName(t),2.5,{alpha:1,ease:Quart.easeOut})},window.Preloader=t,t}(),V=["extended","included"],z=function(){function t(){}return t.extend=function(t,e){var i,n,s;for(i in e)n=e[i],he.call(V,i)<0&&(t[i]=n);return null!=(s=e.extended)&&s.apply(t),t},t.include=function(t,e){var i,n,s;for(i in e)n=e[i],he.call(V,i)<0&&(t.prototype[i]=n);return null!=(s=e.included)&&s.apply(t),t},window.Module=t,t}(),C=function(){function t(){this.warningComplete=oe(this.warningComplete,this),this.initialize()}return t.prototype=new createjs.Container,t.prototype.Container_initialize=t.prototype.initialize,t.prototype.initialize=function(){return z.extend(this,d2oda.methods),this.Container_initialize(),this.name="mainContainer",this.regX=d2oda.stage.w/2,this.regY=d2oda.stage.h/2},t.prototype.warning=function(){return createjs.Sound.play("s/wrong"),this.prevX=this.x,TweenMax.to(this,.1,{x:this.x+10,repeat:6,yoyo:!0,onComplete:this.warningComplete}),this},t.prototype.warningComplete=function(){return this.x=this.prevX},window.MainContainer=t,t}(),k=function(){function t(){this.subscribers=[]}return t.prototype.notify=function(t){var e,i,n,s,r;for(s=this.subscribers,r=[],i=0,n=s.length;n>i;i++)e=s[i],e.item===t&&r.push(e.callback(t));return r},t.prototype.subscribe=function(t,e){return this.subscribers.push({item:t,callback:e})},t}(),f=function(t){function e(){return ne=e.__super__.constructor.apply(this,arguments)}return ue(e,t),e.NEXT_SCENE="next_scene",e.PREV_SCENE="prev_scene",e.START="start",window.GameObserver=e,e}(k),d=function(){function t(t){this.prevScene=oe(this.prevScene,this),this.nextScene=oe(this.nextScene,this),this.initialize(t)}return t.prototype=new createjs.EventDispatcher,t.prototype.EventDispatcher_initialize=t.prototype.initialize,t.prototype.initialize=function(t){return this.observer=new f,this.setHeader(t.header).setInstructions(t.instructions).setScore(t.score).setScenes(t.scenes)},t.prototype.setHeader=function(t){return lib.mainContainer.insertBitmap("header",t,d2oda.stage.w/2,0,"tc"),TweenLite.from(lib.header,.5,{alpha:0,y:lib.header.y-20}),this},t.prototype.setInstructions=function(t){return lib.instructions=new w(t),lib.mainContainer.add(lib.instructions,!1),t.states.length>1&&(this.observer.subscribe(f.NEXT_SCENE,lib.instructions.next),this.observer.subscribe(f.PREV_SCENE,lib.instructions.prev)),this},t.prototype.setScore=function(t){return lib.score=new P(t),lib.mainContainer.add(lib.score),this},t.prototype.setScenes=function(t){return lib.scenes=new F(t),lib.mainContainer.add(lib.scenes,!1),this.observer.subscribe(f.NEXT_SCENE,lib.scenes.next),this.observer.subscribe(f.PREV_SCENE,lib.scenes.prev),this},t.prototype.start=function(){return lib.scene.init(),lib.scenes.addEventListener("complete",this.finish)},t.prototype.finish=function(){return oda.endGame()},t.prototype.nextScene=function(){return this.observer.notify(f.NEXT_SCENE)},t.prototype.prevScene=function(){return this.observer.notify(f.PREV_SCENE)},window.Game=t,t}(),h=function(){function t(t){z.extend(this,d2oda.methods),this.name=t.id,this.group=t.group,this.current=0,t.invisible&&this.setInvisible(!0,!1)}return t.prototype.update=function(t){var e,i,n,s,r,a,o,h,l,u,c,p,d,f,g;switch(t.type){case"blinkAll":for(u=this.group,f=[],i=0,a=u.length;a>i;i++)e=u[i],f.push(lib[e].blink());return f;case"pulseAll":for(c=this.group,g=[],n=0,o=c.length;o>n;n++)e=c[n],g.push(lib[e].pulse());return g;case"fadeIn":for(p=this.group,s=0,h=p.length;h>s;s++)e=p[s],TweenMax.killTweensOf(lib[e]),TweenLite.killTweensOf(lib[e]),lib[e].alpha=0,t.target||lib[e].fadeOut();if(t.target)return lib[t.target].fadeIn();break;case"fadeOut":for(d=this.group,r=0,l=d.length;l>r;r++)e=d[r],TweenMax.killTweensOf(lib[e]),TweenLite.killTweensOf(lib[e]),lib[e].alpha=1,t.target||lib[e].fadeOut();if(t.target)return lib[t.target].fadeOut();break;case"success":return this.target=t.targetGroup,this.next=t.nextGroup,this.success=t.success,lib[this.target].setInvisible(),lib[this.next].setInvisible(),this.setInvisible(!1);case"choose":return this.setInvisible(!1);case"hide":return this.setInvisible()}},t.prototype.setInvisible=function(t,e){var i,n,s,r,a,o,h,l,u;if(null==t&&(t=!0),null==e&&(e=!0),t){for(o=this.group,l=[],n=0,r=o.length;r>n;n++)i=o[n],e?l.push(TweenLite.to(lib[i],.5,{alpha:0})):l.push(lib[i].alpha=0);return l}for(h=this.group,u=[],s=0,a=h.length;a>s;s++)i=h[s],e?u.push(TweenLite.to(lib[i],.5,{alpha:1})):u.push(lib[i].alpha=1);return u},t.prototype.doSwitch=function(){return lib[this.target].update({type:"fadeIn",target:this.success}),lib[this.next].setInvisible(!1),this.setInvisible()},t.prototype.doChoose=function(t){return this.choosen=t},t.prototype.isComplete=function(){return!0},window.ComponentGroup=t,t}(),l=function(t){function e(){return se=e.__super__.constructor.apply(this,arguments)}return ue(e,t),e.UPDATED="component_update",window.ComponentObserver=e,e}(k),o=function(){function t(){}return t.prototype.next=function(){},t.prototype.prev=function(){},t.prototype.update=function(){},t}(),P=function(t){function e(t){this.minusOne=oe(this.minusOne,this),this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i;switch(this.Container_initialize(),z.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.counter=t.init,this.type=t.type,t.type){case"points":return this.block=!1,i=this.createBitmap("front",t.aimg,0,0),e=this.createBitmap("back",t.bimg,0,0),this.count=this.createText("init",t.init,"24px Quicksand",t.acolor,0,0,"center"),this.total=this.createText("total",t.total,"24px Quicksand",t.bcolor,0,0,"center"),e.x=i.width/4*2,e.y=i.height/4*2,this.total.x=e.x+e.width/2,this.total.y=e.y+e.height/2-this.total.getMeasuredHeight()/2,this.count.x=i.x+i.width/2,this.count.y=i.y+i.height/2-this.count.getMeasuredHeight()/2,this.addChild(e,i,this.count,this.total);case"clock":return i=this.createBitmap("front",t.aimg,0,0),this.count=this.createText("init",t.init,"24px Quicksand",t.acolor,0,0,"center"),this.count.x=i.x+i.width/2,this.count.y=i.y+i.height/2-this.count.getMeasuredHeight()/2,this.addChild(i,this.count)}},e.prototype.start=function(){return this.interval=setInterval(this.minusOne,1e3)},e.prototype.stop=function(){return clearInterval(this.interval)},e.prototype.reset=function(){return this.counter=0,this.updateCount(this.counter)},e.prototype.minusOne=function(){return this.counter--,this.updateCount(this.counter),0===this.counter?(this.stop(),this.dispatchEvent({type:"count_complete"})):void 0},e.prototype.plusOne=function(){return createjs.Sound.play("s/good"),this.block===!0?(this.block=!1,void 0):(this.counter++,this.updateCount(this.counter))},e.prototype.enableBlock=function(){return this.block=!0},e.prototype.updateTotal=function(t){return this.total.text=t},e.prototype.updateCount=function(t){return this.count.text=t},window.Score=e,e}(o),w=function(t){function e(t){this.instructionsComplete=oe(this.instructionsComplete,this),this.prev=oe(this.prev,this),this.next=oe(this.next,this),this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e;return this.Container_initialize(),this.x=t.x,this.y=t.y,this.states=t.states,this.playing=!1,this.currentState=0,e=new createjs.Shape,e.graphics.beginFill("#bcd748").moveTo(0,0).lineTo(8,5).lineTo(0,10),e.y=5,this.label=new createjs.Text(this.states[this.currentState].text,"16px Roboto","#000"),this.label.x=14,this.addChild(e,this.label),TweenLite.from(this,.5,{alpha:0,x:this.x-20})},e.prototype.playSound=function(){var t;return this.states[this.currentState].played?void 0:(this.playing=!0,this.states[this.currentState].played=!0,t=createjs.Sound.play(this.states[this.currentState].sound),t.addEventListener("complete",this.instructionsComplete),t)},e.prototype.next=function(){return this.currentState++,this.states.length>1&&this.currentState<this.states.length?(this.label.text=this.states[this.currentState].text,TweenLite.from(this,.5,{alpha:0,x:this.x-20}),this.playSound()):void 0},e.prototype.prev=function(){return this.currentState--,this.currentState>=0?(this.label.text=this.states[this.currentState].text,TweenLite.from(this,.5,{alpha:0,x:this.x-20})):this.currentState++},e.prototype.instructionsComplete=function(){return this.playing=!1,this.dispatchEvent({type:"complete"})},window.Instructions=e,e}(o),Q=function(t){function e(t){this.openPrompt=oe(this.openPrompt,this),this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h,l,u;return this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),this.x=t.x,this.y=t.y,this.name=null!=(s=t.name)?s:t.id,n=null!=(r=t.font)?r:"Arial 20px",i=null!=(a=t.color)?a:"#333",this.stroke=null!=(o=t.stroke)?o:3,this.scolor=null!=(h=t.scolor)?h:"#333",this.bcolor=null!=(l=t.bcolor)?l:"#FFF",e=null!=(u=t.align)?u:"",this.mainText=this.createText("#{@name}_main","",n,i,0,0,e),this.pastText=this.createText("#{@name}_past","",n,i,0,this.mainText.getMeasuredHeight()+t.margin,e),this.pastText.text="",this.back=new createjs.Shape,this.back.y=this.mainText.getMeasuredHeight()+t.margin,this.add(this.back,!1),this.add(this.pastText,!1),this.add(this.mainText,!1),this.addEventListener("click",this.openPrompt)},e.prototype.openPrompt=function(){var t;return t=prompt("Enter the past simple form of "+this.mainText.text),this.pastText.text=t,t===this.success?this.complete=!0:void 0},e.prototype.update=function(t){return this.pastText.text=t.success,this.mainText.text=t.text,this.success=t.success,this.complete=!1,this.back.graphics.c().f(this.bcolor).dr(0,0,this.pastText.getMeasuredWidth(),this.pastText.getMeasuredHeight()).ss(this.stroke).s(this.scolor).mt(0,this.pastText.getMeasuredHeight()).lt(this.pastText.getMeasuredWidth(),this.pastText.getMeasuredHeight()),this.back.x=-this.pastText.getMeasuredWidth()/2,this.pastText.text="",TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(o),m=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a;return this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),e=null!=(n=t.align)?n:"",this.name=null!=(s=t.name)?s:t.id,this.x=t.x,this.y=t.y,this.scaleX=null!=(r=t.scale)?r:1,this.scaleY=null!=(a=t.scale)?a:1,i=this.createBitmap(this.name,t.id,0,0,e),this.width=i.width,this.height=i.height,this.mouseEnabled=!0,this.add(i,!1)},e.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,!0},e}(o),Y=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h,l,u;return this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),n=null!=(r=t.font)?r:"20px Arial",i=null!=(a=t.fcolor)?a:"#333",e=null!=(o=t.align)?o:"",this.name=null!=(h=t.name)?h:t.id,this.x=t.x,this.y=t.y,this.scaleX=null!=(l=t.scale)?l:1,this.scaleY=null!=(u=t.scale)?u:1,s=this.createText(this.name,t.text,n,i,0,0,e),t.lineWidth&&(s.lineWidth=t.lineWidth),this.width=s.getMeasuredWidth(),this.height=s.getMeasuredHeight(),this.mouseEnabled=!0,this.add(s,!1)},e.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,!0},e}(o),B=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r;return this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),e=null!=(i=t.align)?i:"",this.name=null!=(n=t.name)?n:t.id,this.x=t.x,this.y=t.y,this.scaleX=null!=(s=t.scale)?s:1,this.scaleY=null!=(r=t.scale)?r:1,this.sprite=this.createSprite(this.name,t.imgs,t.frames,0,0,e),this.width=this.sprite.width,this.height=this.sprite.height,this.mouseEnabled=!0,this.droptargets=new Array,this.observer=new l,this.add(this.sprite,!1)},e.prototype.prevFrame=function(){return this.sprite.currentFrame--},e.prototype.nextFrame=function(){return this.sprite.currentFrame++},e.prototype.nextStep=function(){return this.storyboard.length>0?(this.sprite.gotoAndStop(this.storyboard[this.sprite.currentFrame]),TweenLite.from(this,.3,{alpha:0})):void 0},e.prototype.goto=function(t){return this.sprite.gotoAndStop(t)},e.prototype.update=function(t){return this.droptargets=[this.sprite],this.success=t.success,this.storyboard=t.storyboard,this.observer.notify(l.UPDATED)},e.prototype.isComplete=function(){return TweenLite.killTweensOf(this),TweenMax.killTweensOf(this),this.alpha=1,this.sprite.currentFrame>0
},e}(o),c=function(t){function e(t){this.evaluateDrop=oe(this.evaluateDrop,this),this.handleMouseDown=oe(this.handleMouseDown,this),this.update=oe(this.update,this),this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a;switch(this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),z.extend(this,d2oda.utilities),this.name=null!=(r=t.name)?r:t.id,this.x=t.x,this.y=t.y,this.pos={x:this.x,y:this.y},this.index=t.index,this.eval=t.eval,this.droptargets=new Array,e=this.createBitmap(this.name,t.id,0,0),this.bmpname=t.name,this.bmpid=t.id,this.width=e.width,this.height=e.height,this.setPosition(t.align),t.afterSuccess){case"hide":this.afterSuccess=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterSuccess=this.returnToPlace;break;case"origin":this.afterSuccess=this.setInOrigin}switch(t.afterFail){case"hide":this.afterFail=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterFail=this.returnToPlace;break;case"origin":this.afterFail=this.setInOrigin}if(this.add(e,!1),this.target=this.isArray(t.target)?t.target:lib[t.target],this.target)if(this.isArray(this.target))for(a=this.target,n=0,s=a.length;s>n;n++)i=a[n],lib[i].observer.subscribe(l.UPDATED,this.update);else this.target.observer.subscribe(l.UPDATED,this.update);return this.addEventListener("mousedown",this.handleMouseDown)},e.prototype.update=function(){var t,e,i,n,s;if(this.isArray(this.target)){for(t=new Array,s=this.target,i=0,n=s.length;n>i;i++)e=s[i],t.merge(lib[e].droptargets);return this.droptargets=t}return this.droptargets=this.target.droptargets},e.prototype.handleMouseDown=function(t){var e,i,n,s=this;return i=t.stageX/d2oda.stage.r,n=t.stageY/d2oda.stage.r,e={x:i-this.x,y:n-this.y},this.x=i-e.x,this.y=n-e.y,t.addEventListener("mousemove",function(t){return i=t.stageX/d2oda.stage.r,n=t.stageY/d2oda.stage.r,s.x=i-e.x,s.y=n-e.y,!1}),t.addEventListener("mouseup",function(){return s.droptargets&&s.droptargets.length>0?s.evaluateDrop(t):s.dispatchEvent({type:"drop"}),!1}),!1},e.prototype.evaluateDrop=function(){var t,e,i,n,s,r,a;for(n=null,e=!1,a=this.droptargets,s=0,r=a.length;r>s;s++)t=a[s],i=t.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),t.hitTest(i.x,i.y)&&(n=t,e=!0);return e?(d2oda.evaluator.evaluate(this.eval,this.name,n),this.dispatchEvent({type:"dropped",drop:n})):this.returnToPlace(this.alpha,this.scaleX,this.scaleY)},e}(o),n=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n=this;return this.Container_initialize(),z.extend(this,d2oda.actions),z.extend(this,d2oda.methods),z.extend(this,d2oda.utilities),this.x=t.x,this.y=t.y,this.index=t.index,this.name=null!=(e=t.name)?e:t.id,this.scale=null!=(i=t.scale)?i:1,this.states=t.states,this.currentState=0,this.setImageText(this.states[this.currentState].img,this.states[this.currentState].txt),this.target=this.isArray(t.target)?t.target:lib[t.target],t.target&&(this.target=lib[t.target]),this.addEventListener("mouseover",function(){return TweenLite.to(n,.5,{scaleX:1.2,scaleY:1.2})}),this.addEventListener("mouseout",function(){return TweenLite.to(n,.5,{scaleX:n.scale,scaleY:n.scale})}),this.addEventListener("click",function(){return t.isRepeat?d2oda.evaluator.evaluate("repeat"):t.isFinish?d2oda.evaluator.evaluate("finish",null,t.target):d2oda.evaluator.evaluate(t.eval,n.name,t.target)})},e.prototype.setImageText=function(t,e){var i,n,s,r,a,o,h,l,u,c,p,d,f,g,y,m,b,w;return this.removeAllChildren(),this.alpha=1,t&&(l=null!=(p=t.x)?p:0,u=null!=(d=t.y)?d:0,i=null!=(f=t.align)?f:"",n=this.createBitmap("img",t.name,l,u,i),t.scale&&(n.scaleX=n.scaleY=t.scale),this.add(n,!1)),e?(h=null!=(g=e.text)?g:"",r=null!=(y=e.font)?y:"20px Arial",s=null!=(m=e.color)?m:"#333",l=null!=(b=e.x)?b:0,u=null!=(w=e.y)?w:0,i=null!=(c=e.align)?c:"",o=this.createText("txt",h,r,s,l,u,i),e.lineWidth&&(o.lineWidth=e.lineWidth),a=new createjs.Shape,a.graphics.beginFill("#000").drawRect(-5,-3,o.getMeasuredWidth()+10,o.getMeasuredHeight()+6),o.hitArea=a,this.add(o,!1)):void 0},e.prototype.updateState=function(){return this.currentState++,this.currentState<this.states.length?(TweenLite.killTweensOf(this),this.setImageText(this.states[this.currentState].img,this.states[this.currentState].txt),this.scaleX=this.scaleY=this.scale,this.states[this.currentState].removeListeners&&this.removeAllEventListeners(),TweenLite.from(this,.3,{alpha:0})):this.currentState--},e.prototype.update=function(t){return TweenLite.killTweensOf(this),this.setImageText(t.img,t.txt),TweenLite.from(this,.5,{alpha:0})},e.prototype.isComplete=function(){return!0},e}(o),s=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e;return this.Container_initialize(),z.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.name=null!=(e=t.name)?e:t.id,this.target=t.target,this.eval=t.eval,this.label=t.label,this.caption=t.caption,this.bullets=t.bullets},e.prototype.update=function(t){var e,i,n,s,r,a,o=this;switch(this.removeAllChildren(),t.type){case"img":r=this.createBitmap(""+this.name+"_opt1",t.opt1,0,100,"tr"),r.index=1,a=this.createBitmap(""+this.name+"_opt2",t.opt2,0,100),a.index=2;break;case"txt":t.img&&(e=this.insertBitmap(""+this.name+"_img",t.img.name,t.img.x,t.img.y,"tc"),t.img.scale&&(e.scaleY=e.scaleX=t.img.scale)),s=this.bullets.lineWidth?this.bullets.lineWidth:200,this.insertText("separator","/",this.bullets.font,this.bullets.color,0,400,"center"),r=this.createText(""+this.name+"_opt1",t.opt1,this.bullets.font,this.bullets.color,-20,400,"right"),this.bullets.lineWidth&&(r.lineWidth=this.bullets.lineWidth),i=new createjs.Shape,i.graphics.beginFill("#000").drawRect(-r.getMeasuredWidth()-5,-3,r.getMeasuredWidth()+10,r.getMeasuredHeight()+6),r.hitArea=i,r.index=1,a=this.createText(""+this.name+"_opt2",t.opt2,this.bullets.font,this.bullets.color,20,400,"left"),this.bullets.lineWidth&&(a.lineWidth=this.bullets.lineWidth),n=new createjs.Shape,n.graphics.beginFill("#000").drawRect(-5,-3,a.getMeasuredWidth()+10,a.getMeasuredHeight()+6),a.hitArea=n,a.index=2}return this.add(r),r.addEventListener("mouseover",function(){return TweenLite.to(r,.5,{alpha:.5})}),r.addEventListener("mouseout",function(){return TweenLite.to(r,.5,{alpha:1})}),r.addEventListener("click",function(){return d2oda.evaluator.evaluate(o.eval,""+o.name+"_opt1",o.target)}),this.add(a),a.addEventListener("mouseover",function(){return TweenLite.to(a,.5,{alpha:.5})}),a.addEventListener("mouseout",function(){return TweenLite.to(a,.5,{alpha:1})}),a.addEventListener("click",function(){return d2oda.evaluator.evaluate(o.eval,""+o.name+"_opt2",o.target)}),t.label&&this.insertText(""+this.name+"_label",t.label,this.label.font,this.label.color,0,40,"center"),t.caption&&this.insertText(""+this.name+"_caption",t.caption,this.caption.font,this.caption.color,0,360,"center"),TweenLite.from(this,.5,{alpha:0})},e.prototype.isComplete=function(){return!0},e}(o),x=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o;return this.Container_initialize(),z.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.name=null!=(s=t.name)?s:t.id,n=null!=(r=t.font)?r:"Arial 20px",i=null!=(a=t.color)?a:"#333",e=null!=(o=t.align)?o:"",this.text=this.createText("txt","",n,i,0,0,e),this.add(this.text,!1)},e.prototype.update=function(t){return this.text.text=t.text,this.success=t.success,this.complete=!1,TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return this.complete},e}(o),r=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r;return this.Container_initialize(),z.extend(this,d2oda.methods),this.name=null!=(e=t.name)?e:t.id,this.x=null!=(i=t.x)?i:0,this.y=null!=(n=t.y)?n:0,this.uwidth=null!=(s=t.uwidth)?s:100,this.uheight=null!=(r=t.uheight)?r:100,this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,o,h,u;for(this.removeAllChildren(),s=0,r=0,u=t.containers,o=0,h=u.length;h>o;o++)e=u[o],n=e.opts?e.opts:t,i=new a(n,e.type,e.success,e.x,e.y,this.uwidth,this.uheight),this.droptargets.push(i),this.add(i,!1);return this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(o),a=function(t){function e(t,e,i,n,s,r,a){this.initialize(t,e,i,n,s,r,a)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,n,s,r,a){var o,h;return this.Container_initialize(),z.extend(this,d2oda.methods),this.name=null!=(h=t.name)?h:t.id,this.x=null!=n?n:0,this.y=null!=s?s:0,this.width=r,this.height=a,this.success=i,this.complete="#empty"!==this.success?!1:!0,this.img=null,o=new createjs.Shape,o.graphics.beginFill("#FFF").drawRect(0,0,this.width,this.height),o.alpha=.1,this.add(o,!1)},e.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},e.prototype.update=function(t,e){return null==t&&(t=!0),null==e&&(e=""),null!==this.img&&this.removeChild(this.img),this.img=this.createBitmap("img",e,this.width/2,this.height/2,"mc"),this.img.scaleX=this.img.scaleY=(this.height-5)/this.img.height,this.add(this.img,!1),this.complete=t},e}(o),X=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n;return this.Container_initialize(),z.extend(this,d2oda.methods),this.name=null!=(e=t.name)?e:t.id,this.x=null!=(i=t.x)?i:0,this.y=null!=(n=t.y)?n:0,this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,a,o,h;for(this.removeAllChildren(),s=0,r=0,h=t.containers,a=0,o=h.length;o>a;a++)e=h[a],n=e.opts?e.opts:t,i=new W(n,e.type,e.success,e.x,e.y),this.droptargets.push(i),this.add(i,!1);return this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(o),W=function(t){function e(t,e,i,n,s){this.initialize(t,e,i,n,s)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,n,s){var r,a,o;switch(this.Container_initialize(),z.extend(this,d2oda.methods),this.x=null!=n?n:0,this.y=null!=s?s:0,this.width=null!=(a=t.width)?a:t.radius,this.height=null!=(o=t.height)?o:t.radius,this.success=i,this.complete=!1,e){case"rshp":r=new createjs.Shape,r.graphics.beginFill(t.bcolor).setStrokeStyle(t.stroke).beginStroke(t.scolor).drawRoundRect(0,0,t.width,t.height,t.radius)}return this.add(r,!1)},e.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},e.prototype.update=function(t){return null==t&&(t=!0),this.complete=t},e}(o),g=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h,l,u,c,p,d,f,g,y,m,b,w,x,v,T,C,S,_;switch(this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.utilities),this.x=null!=(m=t.x)?m:0,this.y=null!=(b=t.y)?b:0,this.columns=null!=(w=t.columns)?w:1,this.rows=null!=(x=t.rows)?x:1,this.uwidth=null!=(v=t.uwidth)?v:100,this.uheight=null!=(T=t.uheight)?T:100,this.name=null!=(C=t.name)?C:t.id,this.currentTarget=0,this.warnings=0,this.targets=new Array,t.label&&(o=null!=(S=t.label.font)?S:"Arial 20px",s=null!=(p=t.label.color)?p:"#333",e=null!=(d=t.label.align)?d:"",h=null!=(f=t.label.x)?f:0,l=null!=(g=t.label.y)?g:0,this.text=this.createText("txt","",o,s,h,l,e),this.add(this.text)),this.cells=t.mixed?this.shuffle(t.cells):t.cells,t.align){case"evenodd":for(r=0,a=0,y=this.cells,_=[],u=0,c=y.length;c>u;u++)n=y[u],h=a%2===0?r*this.uwidth:(this.columns-1-r)*this.uwidth,i=this.insertBitmap(n.img,n.img,h,a*this.uheight,"mc"),this.targets.push(i),r++,r===this.columns?(r=0,_.push(a++)):_.push(void 0);return _}},e.prototype.update=function(){var t;return t=this.cells[this.currentTarget],this.success=t.success,this.text.text=t.txt,this.targets[this.currentTarget].complete=!1,this.blink(this.targets[this.currentTarget]),TweenLite.from(this.text,.3,{alpha:0,y:this.text.y-10})},e.prototype.fadeOut=function(t){return TweenMax.killTweensOf(t),TweenLite.killTweensOf(t),TweenLite.to(t,.5,{alpha:0,y:t.y-20})},e.prototype.blink=function(t,e){var i;return null==e&&(e=!0),TweenMax.killTweensOf(t),i=1,e?TweenMax.to(t,.5,{alpha:.2,repeat:-1,yoyo:!0}):void 0},e.prototype.isComplete=function(){var t,e,i,n;for(n=this.targets,e=0,i=n.length;i>e;e++)if(t=n[e],t.complete===!1)return!1;return!0},e}(o),A=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h;return this.Container_initialize(),z.extend(this,d2oda.actions),z.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.margin=null!=(e=t.margin)?e:10,this.font=null!=(i=t.font)?i:"20px Arial",this.fcolor=null!=(n=t.fcolor)?n:"#333",this.bcolor=null!=(s=t.bcolor)?s:"#FFF",this.scolor=null!=(r=t.scolor)?r:"#333",this.stroke=null!=(a=t.stroke)?a:3,this.name=null!=(o=t.name)?o:t.id,this.align=null!=(h=t.align)?h:"",this.currentTarget=0,this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,a,o,h,u,c,p,d,f;for(this.removeAllChildren(),t.h2&&(e=null!=(d=t.h2.align)?d:"",n=this.createText("h2",t.h2.text,this.font,this.color,t.h2.x,t.h2.y,e),this.add(n,!1)),t.nextGroup&&(this.nextGroup=t.nextGroup),s=0,a=0,u=-5,r=0,f=t.pattern,c=0,p=f.length;p>c;c++)o=f[c],"#tcpt"===o?(h=t.targets[s],i=new G(h,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,a,u),this.droptargets.push(i),this.add(i,!1),r=a+=i.width+this.margin,s++):"#rtn"===o?(i=this.createText("txt","BLANK",this.font,this.fcolor,a,0),a>r&&(r=a),a=0,u+=i.getMeasuredHeight()):(i=this.createText("txt",o,this.font,this.fcolor,a,u),this.add(i,!1),r=a+=i.getMeasuredWidth()+this.margin);return this.width=r,this.setPosition(this.align),this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){var t,e,i,n;for(n=this.droptargets,e=0,i=n.length;i>e;e++)if(t=n[e],t.complete===!1)return!1;return!0},e}(o),L=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h;return this.Container_initialize(),z.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.margin=null!=(e=t.margin)?e:10,this.font=null!=(i=t.font)?i:"20px Arial",this.fcolor=null!=(n=t.fcolor)?n:"#333",this.bcolor=null!=(s=t.bcolor)?s:"#FFF",this.scolor=null!=(r=t.scolor)?r:"#333",this.stroke=null!=(a=t.stroke)?a:3,this.name=null!=(o=t.name)?o:t.id,this.align=null!=(h=t.align)?h:"",this.currentTarget=0,this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,a,o,h,u,c,p;for(this.removeAllChildren(),t.h2&&(e=null!=(c=t.h2.align)?c:"",n=this.createText("h2",t.h2.text,this.font,this.color,t.h2.x,t.h2.y,e),this.add(n,!1)),s=0,r=0,p=t.pattern,h=0,u=p.length;u>h;h++)a=p[h],"#tcpt"===a?(o=t.targets[s],i=new R(o,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,r,-5),this.droptargets.push(i),this.add(i,!1),r+=i.width+this.margin,s++):(i=this.createText("txt",a,this.font,this.fcolor,r,-5),this.add(i,!1),r+=i.getMeasuredWidth()+this.margin);return this.width=r,this.setPosition(this.align),this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){return!0},e}(o),R=function(t){function e(t,e,i,n,s,r,a,o){this.initialize(t,e,i,n,s,r,a,o)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,n,s,r,a,o){var h,l,u;return this.Container_initialize(),z.extend(this,d2oda.methods),this.x=a,this.y=o,this.success=null!=(h=t.success)?h:t.text,this.text=this.createText("txt",t.text,e,i,0,-5),this.width=null!=(l=t.width)?l:this.text.getMeasuredWidth(),this.height=null!=(u=t.height)?u:this.text.getMeasuredHeight(),this.complete=!1,this.back=new createjs.Shape,this.back.graphics.f(n).dr(0,0,this.width,this.height).ss(r).s(s).mt(0,this.height).lt(this.width,this.height),this.add(this.back,!1),this.add(this.text,!1),this.text.text=""},e.prototype.setRectOutline=function(t,e,i){return this.back.graphics.f(t).ss(e).s(i).dr(0,0,this.width,this.height)},e.prototype.showEvaluation=function(){return this.complete?this.insertBitmap("correct","correct",this.width,this.height/2,"ml"):this.insertBitmap("wrong","wrong",this.width,this.height/2,"ml")},e.prototype.update=function(t,e){return null==e&&(e=!0),this.complete=e,this.text.text=t,this.text.textAlign="center",this.text.x=this.width/2,TweenLite.from(this,.3,{alpha:0})},e}(o),U=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h,u,c=this;return this.Container_initialize(),z.extend(this,d2oda.methods),this.name=null!=(i=t.name)?i:t.id,this.x=t.x,this.y=t.y,this.font=null!=(n=t.font)?n:"20px Arial",this.fcolor=null!=(s=t.fcolor)?s:"#333",this.bcolor=null!=(r=t.bcolor)?r:"#FFF",this.shcolor=null!=(a=t.shcolor)?a:"#F00",this.shape=null!=(o=t.shape)?o:"rect",this.uwidth=null!=(h=t.uwidth)?h:100,this.uheight=null!=(u=t.uheight)?u:100,this.radius=null!=(e=t.radius)?e:0,this.allComplete=!1,this.observer=new l,this.droptargets=new Array,this.path=new Array,this.addEventListener("mousedown",function(t){return c.path=new Array,c.getLetterContainer(),t.addEventListener("mousemove",function(){return c.getLetterContainer()}),t.addEventListener("mouseup",function(){var t,e,i,n,s,r,a,o,h,l,u,p,d,f,g,y,m;for(e=!1,o=c.path.unique(),a=function(){var e,i,n;for(n=[],e=0,i=o.length;i>e;e++)t=o[e],n.push(t.name);return n}(),a.sort(),y=c.words,u=0,f=y.length;f>u;u++)if(l=y[u],l.enabled){for(s=new Array,h=l.coords.sort(),n=p=0,m=h.length;m>=0?m>p:p>m;n=m>=0?++p:--p)s[n]="l"+h[n];i=s.compare(a),i&&(e=!0,l.complete=!0,l.fx?lib[l.target][l.fx]():lib[l.target].fadeOut(),lib.scene.success())}if(!e){for(d=0,g=o.length;g>d;d++)r=o[d],r.showShape(!1);return lib.scene.fail()}}),!1})},e.prototype.getLetterContainer=function(){var t,e,i;return i=this.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),e=this.getObjectUnderPoint(i.x,i.y),t=e.parent,t&&t instanceof v?(t.showShape(),this.path.push(t)):void 0},e.prototype.update=function(t){var e,i,n,s,r,a,o,h,u,c;for(this.removeAllChildren(),this.words=t.words,i=0,n=0,c=t.matrix,a=0,h=c.length;h>a;a++){for(r=c[a],o=0,u=r.length;u>o;o++)e=r[o],s=new v({text:e,width:this.uwidth,height:this.uheight,radius:this.radius},this.font,this.fcolor,this.bcolor,this.shcolor,this.shape,n*this.uwidth,i*this.uheight),s.name="l"+n+"_"+i,this.add(s),this.droptargets.push(s),n++;n=0,i++}return this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){var t,e,i,n;for(n=this.words,e=0,i=n.length;i>e;e++)t=n[e],t.complete===!1;return!0},e}(o),u=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h;return this.Container_initialize(),z.extend(this,d2oda.methods),this.name=null!=(e=t.name)?e:t.id,this.x=t.x,this.y=t.y,this.font=null!=(i=t.font)?i:"20px Arial",this.fcolor=null!=(n=t.fcolor)?n:"#333",this.bcolor=null!=(s=t.bcolor)?s:"#FFF",this.stroke=null!=(r=t.stroke)?r:2,this.scolor=null!=(a=t.scolor)?a:"#FFF",this.uwidth=null!=(o=t.uwidth)?o:100,this.uheight=null!=(h=t.uheight)?h:100,this.allComplete=!1,this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,a,o,h,u,c,p,d,f,g;for(this.removeAllChildren(),this.words=t.words,s=h=1,f=this.words.length;f>=1?f>=h:h>=f;s=f>=1?++h:--h)o=this.insertText("txt"+s,""+s,this.font,this.fcolor,this.words[s-1].x,this.words[s-1].y),this.words[s-1].eval&&(o.eval=this.words[s-1].eval,o.target=this.words[s-1].target,o.index=this.words[s-1].index,o.addEventListener("click",function(t){return d2oda.evaluator.evaluate(t.target.eval,t.target.name,t.target.target)}));for(i=0,n=0,g=t.matrix,u=0,p=g.length;p>u;u++){for(r=g[u],c=0,d=r.length;d>c;c++)e=r[c],"#"!==e&&("-"===e?(a=new createjs.Shape,a.graphics.f("#999").ss(this.stroke).s(this.scolor).dr(0,0,this.uwidth,this.uheight),a.x=n*this.uwidth,a.y=i*this.uheight):(a=new G({text:e,width:this.uwidth,height:this.uheight},this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,n*this.uwidth,i*this.uheight),a.name="l"+n+i,a.setRectOutline(this.bcolor,this.stroke,this.scolor)),this.add(a),this.droptargets.push(a)),n++;n=0,i++}return this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.fadeOut=function(t){return TweenMax.killTweensOf(t),TweenLite.killTweensOf(t),TweenLite.to(t,.5,{alpha:0,y:t.y-20})},e.prototype.evaluateWords=function(){var t,e,i,n,s,r,a,o,h,l;for(h=this.words,l=[],s=0,a=h.length;a>s;s++){for(i=h[s],t=i.coords,n=!0,r=0,o=t.length;o>r;r++)e=t[r],lib["l"+e].complete||(n=!1);i.complete?l.push(void 0):n?(i.complete=!0,lib[i.target]&&this.fadeOut(lib[i.target]),lib["number"+i.target]&&this.fadeOut(lib["number"+i.target]),createjs.Sound.play("s/"+i.target),l.push(lib.scene.success())):l.push(void 0)}return l},e.prototype.isComplete=function(){var t,e,i,n;for(this.allComplete=!0,n=this.words,e=0,i=n.length;i>e;e++)t=n[e],t.complete||(this.allComplete=!1);return this.allComplete},e}(o),t=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,s,r,a,o,h,l,u,c,p;for(this.Container_initialize(),z.extend(this,d2oda.methods),this.name=null!=(u=t.name)?u:t.id,this.x=t.x,this.y=t.y,this.eval=t.eval,this.target=t.target,e="abcdefghijklmnopqrstuvwxyz",i=e.split(""),this.abccollection=new Array,r=0,h=0,l=i.length;l>h;h++)a=i[h],r>=13?(c=(r-13)*(t.uwidth+t.margin),p=t.uheight):(c=r*(t.uwidth+t.margin),p=0),t.clickable?(o={id:"abc_"+r,x:c,y:p,index:a,target:this.target,eval:this.eval,states:[{txt:{text:a,font:t.font,color:t.fcolor}}]},s=new n(o)):(o={id:"abc_"+r,x:c,y:p,index:a,target:this.target,eval:this.eval,text:a,font:t.font,color:t.fcolor,afterSuccess:"origin",afterFail:"return"},s=new T(o)),this.abccollection.push(s),this.add(s),r++;return this.width=c+t.uwidth,this.height=2*p,this.setPosition("mc"),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.update=function(t){var e,i,n,s,r;if(t.reset){for(s=this.abccollection,r=[],i=0,n=s.length;n>i;i++)e=s[i],r.push(e.visible=!0);return r}},e.prototype.isComplete=function(){return!0},e}(o),N=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h,u;return this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.utilities),this.name=null!=(i=t.name)?i:t.id,this.x=t.x,this.y=t.y,this.uwidth=null!=(n=t.uwidth)?n:25,this.bcolor=null!=(s=t.bcolor)?s:"#FFF",this.scolor=null!=(r=t.scolor)?r:"#333",this.fcolor=null!=(a=t.fcolor)?a:"#333",this.font=null!=(o=t.font)?o:"20px Arial",this.stroke=null!=(h=t.stroke)?h:3,this.align=null!=(u=t.align)?u:"",this.margin=null!=(e=t.margin)?e:5,this.eval=t.eval,this.currentTarget=0,this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,a,o;for(this.removeAllChildren(),this.droptargets=new Array,this.target=t.target,r=t.word.split(""),i=0,t.prev?(this.prev=this.insertText("prevTxt",t.prev,this.font,this.fcolor,0,0),s=this.prev.getMeasuredWidth()+this.margin):s=0,a=0,o=r.length;o>a;a++)n=r[a]," "===n?s+=this.margin:(t={text:n,width:this.uwidth},e=new G(t,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,s,5),this.droptargets.push(e),this.add(e,!1),s+=this.uwidth+this.margin),i++;return this.width=s,this.setPosition(this.align),i=0,s=this.prev?this.prev.getMeasuredWidth()+this.margin:0,this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){var t,e,i,n;for(n=this.droptargets,e=0,i=n.length;i>e;e++)if(t=n[e],t.complete===!1)return!1;return!0},e}(o),I=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h,u,c;return this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),z.extend(this,d2oda.utilities),this.name=null!=(n=t.name)?n:t.id,this.x=t.x,this.y=t.y,this.uwidth=null!=(s=t.uwidth)?s:25,this.bcolor=null!=(r=t.bcolor)?r:"#FFF",this.scolor=null!=(a=t.scolor)?a:"#333",this.fcolor=null!=(o=t.fcolor)?o:"#333",this.font=null!=(h=t.font)?h:"20px Arial",this.stroke=null!=(u=t.stroke)?u:3,this.align=null!=(c=t.align)?c:"",this.margin=null!=(e=t.margin)?e:5,this.oncomplete=null!=(i=t.oncomplete)?i:null,this.eval=t.eval,this.currentTarget=0,this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,a,o,h,u,c,p,d,f;for(this.removeAllChildren(),this.target=t.target,this.fx=null!=(f=t.fx)?f:"fadeOut",h=t.word.split(""),o=this.shuffle(h),n=0,t.prev?(this.prev=this.insertText("prevTxt",t.prev,this.font,this.fcolor,0,0),r=this.prev.getMeasuredWidth()+this.margin):r=0,u=0,p=h.length;p>u;u++)s=h[u]," "===s?r+=this.margin:(t={text:s,width:this.uwidth},i=new G(t,this.font,this.fcolor,this.bcolor,this.scolor,this.stroke,r,5),this.droptargets.push(i),this.add(i,!1),r+=this.uwidth+this.margin),n++;for(this.width=r,this.setPosition(this.align),n=0,r=this.prev?this.prev.getMeasuredWidth()+this.margin:0,c=0,d=o.length;d>c;c++)a=o[c]," "!==a&&(t={id:"l"+this.name+n,x:r,y:-i.height,index:a,target:this.name,eval:this.eval,text:a,font:this.font,color:this.fcolor,afterSuccess:"hide",afterFail:"return"},e=new T(t),this.add(e),r+=this.uwidth+this.margin,n++);return this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.onComplete=function(){return d2oda.evaluator.evaluate(this.oncomplete["function"],this.name,this.oncomplete.target)},e.prototype.isComplete=function(){var t,e,i,n;for(n=this.droptargets,e=0,i=n.length;i>e;e++)if(t=n[e],t.complete===!1)return!1;return!0},e}(o),G=function(t){function e(t,e,i,n,s,r,a,o){this.initialize(t,e,i,n,s,r,a,o)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,n,s,r,a,o){var h,l,u;return this.Container_initialize(),z.extend(this,d2oda.methods),this.x=a,this.y=o,this.success=null!=(h=t.success)?h:t.text,this.text=this.createText("txt",t.text,e,i,0,-5),this.width=null!=(l=t.width)?l:this.text.getMeasuredWidth(),this.height=null!=(u=t.height)?u:this.text.getMeasuredHeight(),this.complete=!1,this.back=new createjs.Shape,this.back.graphics.f(n).dr(0,0,this.width,this.height).ss(r).s(s).mt(0,this.height).lt(this.width,this.height),this.add(this.back,!1)},e.prototype.setRectOutline=function(t,e,i){return this.back.graphics.f(t).ss(e).s(i).dr(0,0,this.width,this.height)},e.prototype.update=function(t){return t&&t.complete&&(this.complete=t.complete),this.text.textAlign="center",this.text.x=this.width/2,this.add(this.text,!1),TweenLite.from(this,.3,{alpha:0})},e}(o),v=function(t){function e(t,e,i,n,s,r,a,o){this.initialize(t,e,i,n,s,r,a,o)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,n,s,r,a,o){var h,l,u;switch(this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),z.extend(this,d2oda.utilities),this.mouseChildren=!1,this.x=a,this.y=o,this.name=null!=(h="ltc_"+t.name)?h:"ltc_"+t.text,this.success=null!=(l=t.success)?l:t.text,this.text=this.createText("txt",t.text,e,i,t.width/2,t.height/2-15,"center"),this.width=t.width,this.height=t.height,this.radius=null!=(u=t.radius)?u:"20",this.complete=!1,this.selectionEnabled=!1,this.back=new createjs.Shape,this.shape=new createjs.Shape,this.back.graphics.f(n).dr(0,0,this.width,this.height),r){case"rect":this.shape.graphics.f(s).dr(0,0,this.width,this.height);break;case"round":this.shape.graphics.f(s).rr(0,0,this.width,this.height,this.radius);break;case"circle":this.shape.graphics.f(s).dc(this.width/2,this.height/2,this.radius)}return this.add(this.back,!1),this.add(this.shape,!1),this.add(this.text,!1),this.shape.visible=!1},e.prototype.showShape=function(t){return null==t&&(t=!0),this.shape.visible=t},e.prototype.update=function(){return this.complete=!0},e}(o),T=function(t){function e(t){this.handleMouseDown=oe(this.handleMouseDown,this),this.update=oe(this.update,this),this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a;switch(this.Container_initialize(),z.extend(this,d2oda.methods),z.extend(this,d2oda.actions),z.extend(this,d2oda.utilities),this.name=null!=(r=t.name)?r:t.id,this.x=t.x,this.y=t.y,this.pos={x:this.x,y:this.y},this.index=t.index,this.target=this.isArray(t.target)?t.target:lib[t.target],this.droptargets=new Array,this.eval=t.eval,this.label=this.createText("txt",t.text,t.font,t.color,0,0),this.width=this.label.getMeasuredWidth(),this.height=this.label.getMeasuredHeight(),t.afterSuccess){case"hide":this.afterSuccess=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterSuccess=this.returnToPlace;break;case"origin":this.afterSuccess=this.setInOrigin}switch(t.afterFail){case"hide":this.afterFail=this.hide;break;case"inplace":this.afterSuccess=this.putInPlace;break;case"return":this.afterFail=this.returnToPlace;break;case"origin":this.afterFail=this.setInOrigin}if(e=new createjs.Shape,e.graphics.beginFill("#000").drawRect(-5,-3,this.label.getMeasuredWidth()+10,this.label.getMeasuredHeight()+6),this.label.hitArea=e,this.add(this.label,!1),this.target)if(this.isArray(this.target))for(a=this.target,n=0,s=a.length;s>n;n++)i=a[n],lib[i].observer.subscribe(l.UPDATED,this.update);else this.target.observer.subscribe(l.UPDATED,this.update);return this.addEventListener("mousedown",this.handleMouseDown)},e.prototype.update=function(){var t,e,i,n,s;if(this.isArray(this.target)){for(t=new Array,s=this.target,i=0,n=s.length;n>i;i++)e=s[i],t.merge(lib[e].droptargets);return this.droptargets=t}return this.droptargets=this.target.droptargets},e.prototype.handleMouseDown=function(t){var e,i,n,s=this;return i=t.stageX/d2oda.stage.r,n=t.stageY/d2oda.stage.r,e={x:i-this.x,y:n-this.y},this.x=i-e.x,this.y=n-e.y,t.addEventListener("mousemove",function(t){return i=t.stageX/d2oda.stage.r,n=t.stageY/d2oda.stage.r,s.x=i-e.x,s.y=n-e.y,!1}),t.addEventListener("mouseup",function(){return s.droptargets&&s.droptargets.length>0?s.evaluateDrop(t):s.dispatchEvent({type:"drop"}),!1
}),!1},e.prototype.evaluateDrop=function(){var t,e,i,n,s,r,a;for(n=null,e=!1,a=this.droptargets,s=0,r=a.length;r>s;s++)t=a[s],i=t.globalToLocal(oda.stage.mouseX,oda.stage.mouseY),t.hitTest(i.x,i.y)&&(n=t,e=!0);return e?(d2oda.evaluator.evaluate(this.eval,this.name,n),this.dispatchEvent({type:"dropped",drop:n})):this.returnToPlace(this.alpha,this.scaleX,this.scaleY)},e}(o),b=function(t){function e(t){this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i;return this.Container_initialize(),z.extend(this,d2oda.methods),this.x=t.x,this.y=t.y,this.margin=t.margin,this.uwidth=t.uwidth,this.uheight=t.uheight,this.bcolor=t.bcolor,this.scolor=t.scolor,this.stroke=t.stroke,this.name=null!=(e=t.name)?e:t.id,this.align=null!=(i=t.align)?i:"",this.observer=new l,this.droptargets=new Array},e.prototype.update=function(t){var e,i,n,s,r,a,o;for(this.removeAllChildren(),n=0,o=t.containers,r=0,a=o.length;a>r;r++)e=o[r],s=n*(this.uwidth+this.margin),i=new y(e,s,this.uwidth,this.uheight,this.bcolor,this.scolor,this.stroke),this.droptargets.push(i),this.add(i,!1),n++;switch(this.width=(this.uwidth+this.margin)*(n-1),this.align){case"center":this.regX=this.width/2}return this.observer.notify(l.UPDATED),TweenLite.from(this,.3,{alpha:0,y:this.y-10})},e.prototype.isComplete=function(){var t,e,i,n;for(n=this.droptargets,e=0,i=n.length;i>e;e++)if(t=n[e],t.complete===!1)return!1;return!0},e}(o),y=function(t){function e(t,e,i,n,s,r,a){this.initialize(t,e,i,n,s,r,a)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t,e,i,n,s,r,a){var o,h;return null==e&&(e=0),null==i&&(i=100),null==n&&(n=100),null==s&&(s="#FFF"),null==r&&(r="#333"),null==a&&(a=3),this.Container_initialize(),z.extend(this,d2oda.methods),this.x=e,this.success=t.success,this.image=t.img,this.name=null!=(h=t.name)?h:t.id,this.width=i,this.height=n,this.complete=!1,o=new createjs.Shape,o.graphics.f(s).dr(0,0,i,n).ss(a).s(r).mt(0,n).lt(i,n),this.add(o,!1)},e.prototype.update=function(){var t;return t=this.createBitmap(this.image,this.image,0,-5),t.scaleX=t.scaleY=t.width>t.height?this.width/t.width:this.height/t.height,this.add(t,!1),TweenLite.from(this,.3,{alpha:0})},e}(o),F=function(t){function e(t){this.lastScene=oe(this.lastScene,this),this.prev=oe(this.prev,this),this.next=oe(this.next,this),this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s;for(this.Container_initialize(),this.stack=[],this.currentScene=0,n=0,s=t.length;s>n;n++)e=t[n],i=new j(e),i.visible=!1,this.addChild(i),this.stack.push(i);return this.setCurrent(),TweenLite.from(this,1,{alpha:0})},e.prototype.next=function(){return this.stack[this.currentScene].chooseEnabled?(this.stack[this.currentScene].visible=!1,this.currentScene=this.stack[this.currentScene].choose):this.currentScene++,this.stack.length>1&&this.currentScene<this.stack.length?(this.stack[this.currentScene].chooseEnabled||(this.stack[this.currentScene-1].visible=!1),this.setCurrent(),lib.scene.init(),TweenLite.from(this,1,{alpha:0})):TweenLite.to(this,1,{alpha:0,delay:1,onComplete:this.lastScene})},e.prototype.prev=function(){return this.currentScene--,this.currentScene>=0?(this.stack[this.currentScene+1].visible=!1,this.setCurrent(),lib.scene.init(),TweenLite.from(this,1,{alpha:0})):this.currentScene++},e.prototype.lastScene=function(){return"clock"===lib.score.type&&lib.score.stop(),this.dispatchEvent({type:"complete"})},e.prototype.setCurrent=function(){return lib.scene=this.stack[this.currentScene],lib.scene.visible=!0},window.SceneStack=e,e}(o),M=function(){function e(){}return e.prototype.makeChild=function(e){switch(e.type){case"abc":return new t(e);case"drg":return new c(e);case"grd":return new g(e);case"txt":return new Y(e);case"img":return new m(e);case"lbl":return new x(e);case"cln":return new a(e);case"wrt":return new Q(e);case"spr":return new B(e);case"btn":return new n(e);case"stps":return new X(e);case"chs":return new s(e);case"cwd":return new u(e);case"wsch":return new U(e);case"ldrg":return new T(e);case"pcct":return new L(e);case"wcpt":return new N(e);case"swct":return new I(e);case"ccpt":return new r(e);case"pcpt":return new A(e);case"iwcpt":return new b(e);case"grp":return new h(e)}},window.SceneFactory=e,e}(),D=function(t){function e(){return re=e.__super__.constructor.apply(this,arguments)}return ue(e,t),e.NEXT_STEP="next_step",e.COMPLETE="scene_complete",window.SceneObserver=e,e}(k),j=function(t){function e(t){this.setStep=oe(this.setStep,this),this.next=oe(this.next,this),this.sndsuccess=oe(this.sndsuccess,this),this.initialize(t)}return ue(e,t),e.prototype=new createjs.Container,e.prototype.Container_initialize=e.prototype.initialize,e.prototype.initialize=function(t){var e,i,n,s,r,a,o,h,l,u,c,p,d;switch(this.Container_initialize(),z.extend(this,d2oda.methods),this.factory=new M,this.observer=new D,this.currentStep=0,this.choose=null!=(u=t.answers.choose)?u:0,e=t.answers.collection.slice(0),this.answers=t.answers.mixed===!0?d2oda.utilities.shuffle(e):e,this.chooseEnabled=t.answers.chooseEnabled,t.answers.type){case"steps":this.observer.subscribe(D.NEXT_STEP,this.next);break;case"limit":this.answers=d2oda.utilities.shuffleNoRepeat(this.answers,t.answers.limit),this.observer.subscribe(D.NEXT_STEP,this.next)}if(t.containers.length>0)for(c=t.containers,a=0,h=c.length;h>a;a++)n=c[a],i=this.factory.makeChild(n),this.add(i);if(t.groups.length>0){for(p=t.groups,d=[],o=0,l=p.length;l>o;o++)r=p[o],s=this.factory.makeChild(r),d.push(lib[r.id]=s);return d}},e.prototype.init=function(){return"clock"===lib.score.type&&(lib.score.start(),lib.score.addEventListener("count_complete",lib.game.nextScene)),this.setStep()},e.prototype.success=function(t,e){var i,n,s,r;if(null==t&&(t=!0),null==e&&(e=!0),e&&createjs.Sound.stop(),t&&lib.score.plusOne(),i=this.answers[this.currentStep],i&&i.length>0)for(s=0,r=i.length;r>s;s++)if(n=i[s],"snd"!==n.name&&"global"!==n.name&&lib[n.name].isComplete()===!1)return!1;return this.nextStep()},e.prototype.sndsuccess=function(){return this.success(!1)},e.prototype.fail=function(){return lib.score.enableBlock(),lib.mainContainer.warning()},e.prototype.next=function(){return this.currentStep++,this.currentStep>=this.answers.length?this.delay(1e3,function(){return lib.game.observer.notify(f.NEXT_SCENE)}):this.delay(1e3,this.setStep)},e.prototype.setStep=function(){var t,e,i,n,s,r;if(lib.instructions.playing)return lib.instructions.addEventListener("complete",this.setStep);if(console.log("setStep"),e=this.answers[this.currentStep],e&&e.length>0){for(r=[],n=0,s=e.length;s>n;n++)switch(i=e[n],i.name){case"global":d2oda.evaluator.success=i.opts.success,r.push(!1);break;case"snd":this.snd=i.opts.id,createjs.Sound.stop(),t=createjs.Sound.play(i.opts.id),i.opts.successoncomplete&&t.addEventListener("complete",this.sndsuccess),r.push(!1);break;default:r.push(lib[i.name].update(i.opts))}return r}},e.prototype.nextStep=function(){return console.log("next step"),this.observer.notify(D.NEXT_STEP)},window.Scene=e,e}(o)}).call(this);